<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Deployment Guide - Three Environment Setup# Overview# Your repository is configured with three separate environments for a professional development workflow:
Environment S3 Bucket Deploys From Purpose DEV S3_DEV_BUCKET claude/* branches Your iteration & testing STAGING S3_STAGING_BUCKET staging branch Business review PRODUCTION S3_PROD_BUCKET main branch Live customer site How It Works# DEV Environment (Rapid Iteration)# You make changes via Claude Code on your iPhone Changes are pushed to a claude/* branch (automatic) GitHub Actions triggers and builds the Hugo site Site is deployed to your S3 DEV bucket You preview immediately on your iPhone at dev.klm-insurance.com STAGING Environment (Business Review)# You create a PR from your claude/* branch to staging You review and merge the PR GitHub Actions deploys to S3 STAGING bucket Business users review at staging.klm-insurance.com PRODUCTION Environment (Live Site)# Business approves features on staging You create PR from staging to main You merge after final review GitHub Actions deploys to S3 PRODUCTION bucket Site is live at klm-insurance.com See DEVELOPMENT_WORKFLOW.md for complete workflow details.
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/documents/klm-migrate/deployment/"><meta property="og:site_name" content="My Projects - Documentation Hub"><meta property="og:title" content="DEPLOYMENT"><meta property="og:description" content="Deployment Guide - Three Environment Setup# Overview# Your repository is configured with three separate environments for a professional development workflow:
Environment S3 Bucket Deploys From Purpose DEV S3_DEV_BUCKET claude/* branches Your iteration & testing STAGING S3_STAGING_BUCKET staging branch Business review PRODUCTION S3_PROD_BUCKET main branch Live customer site How It Works# DEV Environment (Rapid Iteration)# You make changes via Claude Code on your iPhone Changes are pushed to a claude/* branch (automatic) GitHub Actions triggers and builds the Hugo site Site is deployed to your S3 DEV bucket You preview immediately on your iPhone at dev.klm-insurance.com STAGING Environment (Business Review)# You create a PR from your claude/* branch to staging You review and merge the PR GitHub Actions deploys to S3 STAGING bucket Business users review at staging.klm-insurance.com PRODUCTION Environment (Live Site)# Business approves features on staging You create PR from staging to main You merge after final review GitHub Actions deploys to S3 PRODUCTION bucket Site is live at klm-insurance.com See DEVELOPMENT_WORKFLOW.md for complete workflow details."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="documents"><meta property="article:published_time" content="2026-01-01T17:26:07+00:00"><meta property="article:modified_time" content="2026-01-01T17:26:07+00:00"><meta itemprop=name content="DEPLOYMENT"><meta itemprop=description content="Deployment Guide - Three Environment Setup# Overview# Your repository is configured with three separate environments for a professional development workflow:
Environment S3 Bucket Deploys From Purpose DEV S3_DEV_BUCKET claude/* branches Your iteration & testing STAGING S3_STAGING_BUCKET staging branch Business review PRODUCTION S3_PROD_BUCKET main branch Live customer site How It Works# DEV Environment (Rapid Iteration)# You make changes via Claude Code on your iPhone Changes are pushed to a claude/* branch (automatic) GitHub Actions triggers and builds the Hugo site Site is deployed to your S3 DEV bucket You preview immediately on your iPhone at dev.klm-insurance.com STAGING Environment (Business Review)# You create a PR from your claude/* branch to staging You review and merge the PR GitHub Actions deploys to S3 STAGING bucket Business users review at staging.klm-insurance.com PRODUCTION Environment (Live Site)# Business approves features on staging You create PR from staging to main You merge after final review GitHub Actions deploys to S3 PRODUCTION bucket Site is live at klm-insurance.com See DEVELOPMENT_WORKFLOW.md for complete workflow details."><meta itemprop=datePublished content="2026-01-01T17:26:07+00:00"><meta itemprop=dateModified content="2026-01-01T17:26:07+00:00"><meta itemprop=wordCount content="987"><title>DEPLOYMENT | My Projects - Documentation Hub</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://localhost:1313/documents/klm-migrate/deployment/><link rel=stylesheet href=/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj+RQ9XBXU=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.da5a5af27f9bdea67bd6f07f3142824ec301e0c7f9d37c0fc61aefc961834a9e.js integrity="sha256-2lpa8n+b3qZ71vB/MUKCTsMB4Mf503wPxhrvyWGDSp4=" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-documents"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>My Projects - Documentation Hub</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/icons/menu.svg class=book-icon alt=Menu></label><h3>DEPLOYMENT</h3><label for=toc-control><img src=/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#deployment-guide---three-environment-setup>Deployment Guide - Three Environment Setup</a><ul><li><a href=#overview>Overview</a></li><li><a href=#how-it-works>How It Works</a><ul><li><a href=#dev-environment-rapid-iteration>DEV Environment (Rapid Iteration)</a></li><li><a href=#staging-environment-business-review>STAGING Environment (Business Review)</a></li><li><a href=#production-environment-live-site>PRODUCTION Environment (Live Site)</a></li></ul></li><li><a href=#initial-setup-one-time-only>Initial Setup (One-Time Only)</a><ul><li><a href=#step-1-create-aws-iam-user-if-you-dont-have-one>Step 1: Create AWS IAM User (if you don&rsquo;t have one)</a></li><li><a href=#step-2-add-secrets-to-github>Step 2: Add Secrets to GitHub</a></li><li><a href=#step-3-add-variables-optional-but-recommended>Step 3: Add Variables (Optional but Recommended)</a></li></ul></li><li><a href=#custom-iam-policy-recommended-for-security>Custom IAM Policy (Recommended for Security)</a></li><li><a href=#usage>Usage</a><ul><li><a href=#automatic-deployment-to-dev>Automatic Deployment to DEV</a></li><li><a href=#automatic-deployment-to-staging>Automatic Deployment to STAGING</a></li><li><a href=#manual-deployment>Manual Deployment</a></li></ul></li><li><a href=#viewing-your-changes>Viewing Your Changes</a><ul><li><a href=#on-dev-after-pushing-to-claude-branch>On DEV (After pushing to claude/* branch)</a></li><li><a href=#on-staging-after-merging-pr-to-staging>On STAGING (After merging PR to staging)</a></li></ul></li><li><a href=#workflow-status>Workflow Status</a></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#deployment-failed>Deployment Failed</a></li><li><a href=#site-not-updating>Site Not Updating</a></li><li><a href=#hugo-build-errors>Hugo Build Errors</a></li></ul></li><li><a href=#s3-bucket-configuration>S3 Bucket Configuration</a><ul><li><a href=#bucket-policy-for-public-access>Bucket Policy (for public access)</a></li></ul></li><li><a href=#cost-considerations>Cost Considerations</a></li><li><a href=#security-best-practices>Security Best Practices</a></li><li><a href=#next-steps>Next Steps</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=deployment-guide---three-environment-setup>Deployment Guide - Three Environment Setup<a class=anchor href=#deployment-guide---three-environment-setup>#</a></h1><h2 id=overview>Overview<a class=anchor href=#overview>#</a></h2><p>Your repository is configured with <strong>three separate environments</strong> for a professional development workflow:</p><table><thead><tr><th>Environment</th><th>S3 Bucket</th><th>Deploys From</th><th>Purpose</th></tr></thead><tbody><tr><td><strong>DEV</strong></td><td><code>S3_DEV_BUCKET</code></td><td><code>claude/*</code> branches</td><td>Your iteration & testing</td></tr><tr><td><strong>STAGING</strong></td><td><code>S3_STAGING_BUCKET</code></td><td><code>staging</code> branch</td><td>Business review</td></tr><tr><td><strong>PRODUCTION</strong></td><td><code>S3_PROD_BUCKET</code></td><td><code>main</code> branch</td><td>Live customer site</td></tr></tbody></table><h2 id=how-it-works>How It Works<a class=anchor href=#how-it-works>#</a></h2><h3 id=dev-environment-rapid-iteration>DEV Environment (Rapid Iteration)<a class=anchor href=#dev-environment-rapid-iteration>#</a></h3><ol><li><strong>You make changes</strong> via Claude Code on your iPhone</li><li><strong>Changes are pushed</strong> to a <code>claude/*</code> branch (automatic)</li><li><strong>GitHub Actions triggers</strong> and builds the Hugo site</li><li><strong>Site is deployed</strong> to your S3 DEV bucket</li><li><strong>You preview</strong> immediately on your iPhone at dev.klm-insurance.com</li></ol><h3 id=staging-environment-business-review>STAGING Environment (Business Review)<a class=anchor href=#staging-environment-business-review>#</a></h3><ol><li><strong>You create a PR</strong> from your <code>claude/*</code> branch to <code>staging</code></li><li><strong>You review and merge</strong> the PR</li><li><strong>GitHub Actions deploys</strong> to S3 STAGING bucket</li><li><strong>Business users review</strong> at staging.klm-insurance.com</li></ol><h3 id=production-environment-live-site>PRODUCTION Environment (Live Site)<a class=anchor href=#production-environment-live-site>#</a></h3><ol><li><strong>Business approves</strong> features on staging</li><li><strong>You create PR</strong> from <code>staging</code> to <code>main</code></li><li><strong>You merge</strong> after final review</li><li><strong>GitHub Actions deploys</strong> to S3 PRODUCTION bucket</li><li><strong>Site is live</strong> at klm-insurance.com</li></ol><p><strong>See DEVELOPMENT_WORKFLOW.md for complete workflow details.</strong></p><h2 id=initial-setup-one-time-only>Initial Setup (One-Time Only)<a class=anchor href=#initial-setup-one-time-only>#</a></h2><p>You need to configure AWS credentials in your GitHub repository:</p><h3 id=step-1-create-aws-iam-user-if-you-dont-have-one>Step 1: Create AWS IAM User (if you don&rsquo;t have one)<a class=anchor href=#step-1-create-aws-iam-user-if-you-dont-have-one>#</a></h3><ol><li>Go to AWS Console → IAM → Users</li><li>Create new user: <code>github-actions-klm-deploy</code></li><li>Attach policy: <code>AmazonS3FullAccess</code> (or create custom policy - see below)</li><li>Create access keys</li><li><strong>Save the Access Key ID and Secret Access Key</strong></li></ol><h3 id=step-2-add-secrets-to-github>Step 2: Add Secrets to GitHub<a class=anchor href=#step-2-add-secrets-to-github>#</a></h3><ol><li><p>Go to: <a href=https://github.com/emmalone/klm-migrate/settings/secrets/actions>https://github.com/emmalone/klm-migrate/settings/secrets/actions</a></p></li><li><p>Click &ldquo;New repository secret&rdquo;</p></li><li><p>Add these secrets:</p><p><strong>Required Secrets:</strong></p><ul><li><p>Name: <code>AWS_ACCESS_KEY_ID</code>
Value: [Your AWS Access Key ID]</p></li><li><p>Name: <code>AWS_SECRET_ACCESS_KEY</code>
Value: [Your AWS Secret Access Key]</p></li><li><p>Name: <code>AWS_REGION</code>
Value: <code>us-east-1</code> (or your S3 bucket region)</p></li><li><p>Name: <code>S3_DEV_BUCKET</code>
Value: [Your dev bucket name, e.g., <code>klm-dev</code>]</p></li><li><p>Name: <code>S3_STAGING_BUCKET</code>
Value: [Your staging bucket name, e.g., <code>klm-staging</code>]</p></li><li><p>Name: <code>S3_PROD_BUCKET</code> (optional for now)
Value: [Your production bucket name, e.g., <code>klm-production</code>]</p></li></ul></li></ol><h3 id=step-3-add-variables-optional-but-recommended>Step 3: Add Variables (Optional but Recommended)<a class=anchor href=#step-3-add-variables-optional-but-recommended>#</a></h3><ol><li><p>Go to: <a href=https://github.com/emmalone/klm-migrate/settings/variables/actions>https://github.com/emmalone/klm-migrate/settings/variables/actions</a></p></li><li><p>Click &ldquo;New repository variable&rdquo;</p></li><li><p>Add these variables:</p><ul><li><p>Name: <code>DEV_URL</code>
Value: [Your dev site URL, e.g., <code>https://dev.klm-insurance.com</code>]</p></li><li><p>Name: <code>STAGING_URL</code>
Value: [Your staging site URL, e.g., <code>https://staging.klm-insurance.com</code>]</p></li><li><p>Name: <code>CLOUDFRONT_DEV_DISTRIBUTION_ID</code> (if using CloudFront for dev)
Value: [Your dev CloudFront distribution ID, e.g., <code>E1234567890ABC</code>]</p></li><li><p>Name: <code>CLOUDFRONT_DISTRIBUTION_ID</code> (if using CloudFront for staging)
Value: [Your staging CloudFront distribution ID, e.g., <code>E9876543210XYZ</code>]</p></li></ul></li></ol><h2 id=custom-iam-policy-recommended-for-security>Custom IAM Policy (Recommended for Security)<a class=anchor href=#custom-iam-policy-recommended-for-security>#</a></h2><p>Instead of <code>AmazonS3FullAccess</code>, create a custom policy with minimal permissions:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Version&#34;</span>: <span style=color:#e6db74>&#34;2012-10-17&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Statement&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Effect&#34;</span>: <span style=color:#e6db74>&#34;Allow&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Action&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:PutObject&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:GetObject&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:DeleteObject&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;s3:ListBucket&#34;</span>
</span></span><span style=display:flex><span>      ],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Resource&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::YOUR-DEV-BUCKET-NAME&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::YOUR-DEV-BUCKET-NAME/*&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::YOUR-STAGING-BUCKET-NAME&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::YOUR-STAGING-BUCKET-NAME/*&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::YOUR-PROD-BUCKET-NAME&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:s3:::YOUR-PROD-BUCKET-NAME/*&#34;</span>
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Effect&#34;</span>: <span style=color:#e6db74>&#34;Allow&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Action&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;cloudfront:CreateInvalidation&#34;</span>
</span></span><span style=display:flex><span>      ],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Resource&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:cloudfront::YOUR-ACCOUNT-ID:distribution/YOUR-DEV-DISTRIBUTION-ID&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:cloudfront::YOUR-ACCOUNT-ID:distribution/YOUR-STAGING-DISTRIBUTION-ID&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;arn:aws:cloudfront::YOUR-ACCOUNT-ID:distribution/YOUR-PROD-DISTRIBUTION-ID&#34;</span>
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>Replace:</p><ul><li><code>YOUR-DEV-BUCKET-NAME</code> with your dev S3 bucket name (e.g., <code>klm-dev</code>)</li><li><code>YOUR-STAGING-BUCKET-NAME</code> with your staging S3 bucket name (e.g., <code>klm-staging</code>)</li><li><code>YOUR-PROD-BUCKET-NAME</code> with your production S3 bucket name (e.g., <code>klm-production</code>)</li><li><code>YOUR-ACCOUNT-ID</code> with your AWS account ID</li><li>Distribution IDs for each environment (if using CloudFront)</li></ul><h2 id=usage>Usage<a class=anchor href=#usage>#</a></h2><h3 id=automatic-deployment-to-dev>Automatic Deployment to DEV<a class=anchor href=#automatic-deployment-to-dev>#</a></h3><p>Every time you push to a branch starting with <code>claude/</code>, it automatically deploys to DEV:</p><pre tabindex=0><code>You (on iPhone): &#34;Create a new landing page with video&#34;
Claude Code: [Creates files, commits, pushes to claude/create-landing-page-xyz]
GitHub Actions: [Builds and deploys to DEV]
You: Visit your DEV URL to see the new page!</code></pre><h3 id=automatic-deployment-to-staging>Automatic Deployment to STAGING<a class=anchor href=#automatic-deployment-to-staging>#</a></h3><p>When you merge a PR to the <code>staging</code> branch, it automatically deploys to STAGING:</p><pre tabindex=0><code>You: [Merge PR from claude/* to staging branch]
GitHub Actions: [Builds and deploys to STAGING]
Business Users: Review at your STAGING URL</code></pre><h3 id=manual-deployment>Manual Deployment<a class=anchor href=#manual-deployment>#</a></h3><p>You can manually trigger any workflow:</p><ol><li>Go to: <a href=https://github.com/emmalone/klm-migrate/actions>https://github.com/emmalone/klm-migrate/actions</a></li><li>Click on the workflow you want (Dev, Staging, or Production)</li><li>Click &ldquo;Run workflow&rdquo;</li><li>Select the branch you want to deploy</li><li>Click &ldquo;Run workflow&rdquo;</li></ol><h2 id=viewing-your-changes>Viewing Your Changes<a class=anchor href=#viewing-your-changes>#</a></h2><h3 id=on-dev-after-pushing-to-claude-branch>On DEV (After pushing to claude/* branch)<a class=anchor href=#on-dev-after-pushing-to-claude-branch>#</a></h3><p>After deployment completes (usually 2-3 minutes):</p><ol><li>Open your DEV URL in Safari on your iPhone</li><li>View the landing page at: <code>https://dev.klm-insurance.com/landing</code></li><li>Iterate on changes and push again - it auto-deploys to DEV!</li></ol><h3 id=on-staging-after-merging-pr-to-staging>On STAGING (After merging PR to staging)<a class=anchor href=#on-staging-after-merging-pr-to-staging>#</a></h3><p>After deployment completes (usually 2-3 minutes):</p><ol><li>Share STAGING URL with business users</li><li>View at: <code>https://staging.klm-insurance.com/landing</code></li><li>Gather feedback and iterate as needed</li></ol><h2 id=workflow-status>Workflow Status<a class=anchor href=#workflow-status>#</a></h2><p>Check deployment status:</p><ul><li>Go to: <a href=https://github.com/emmalone/klm-migrate/actions>https://github.com/emmalone/klm-migrate/actions</a></li><li>You&rsquo;ll see a list of all deployments</li><li>Green checkmark = successful deployment</li><li>Red X = failed (click for details)</li></ul><h2 id=troubleshooting>Troubleshooting<a class=anchor href=#troubleshooting>#</a></h2><h3 id=deployment-failed>Deployment Failed<a class=anchor href=#deployment-failed>#</a></h3><ol><li>Check the Actions tab for error messages</li><li>Common issues:<ul><li>AWS credentials not set or expired</li><li>S3 bucket name incorrect</li><li>AWS region mismatch</li><li>Insufficient IAM permissions</li></ul></li></ol><h3 id=site-not-updating>Site Not Updating<a class=anchor href=#site-not-updating>#</a></h3><ol><li>Check if deployment succeeded in Actions tab</li><li>If using CloudFront:<ul><li>Make sure <code>CLOUDFRONT_DISTRIBUTION_ID</code> is set</li><li>Cache invalidation can take 5-10 minutes</li></ul></li><li>Try hard refresh in browser (Cmd+Shift+R on desktop, or clear Safari cache on iPhone)</li></ol><h3 id=hugo-build-errors>Hugo Build Errors<a class=anchor href=#hugo-build-errors>#</a></h3><ol><li>Check the Actions logs for Hugo build errors</li><li>Test locally with <code>hugo --minify</code> to reproduce</li><li>Fix the issue and push again</li></ol><h2 id=s3-bucket-configuration>S3 Bucket Configuration<a class=anchor href=#s3-bucket-configuration>#</a></h2><p>Your S3 bucket should be configured for static website hosting:</p><ol><li>Go to S3 Console → Your Bucket → Properties</li><li>Scroll to &ldquo;Static website hosting&rdquo;</li><li>Enable it</li><li>Set:<ul><li>Index document: <code>index.html</code></li><li>Error document: <code>404.html</code></li></ul></li></ol><h3 id=bucket-policy-for-public-access>Bucket Policy (for public access)<a class=anchor href=#bucket-policy-for-public-access>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Version&#34;</span>: <span style=color:#e6db74>&#34;2012-10-17&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;Statement&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Sid&#34;</span>: <span style=color:#e6db74>&#34;PublicReadGetObject&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Effect&#34;</span>: <span style=color:#e6db74>&#34;Allow&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Principal&#34;</span>: <span style=color:#e6db74>&#34;*&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Action&#34;</span>: <span style=color:#e6db74>&#34;s3:GetObject&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Resource&#34;</span>: <span style=color:#e6db74>&#34;arn:aws:s3:::YOUR-STAGING-BUCKET-NAME/*&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p><strong>Note:</strong> If using CloudFront, you may want to restrict direct S3 access and only allow CloudFront.</p><h2 id=cost-considerations>Cost Considerations<a class=anchor href=#cost-considerations>#</a></h2><ul><li>S3 storage: Very cheap (~$0.023/GB/month)</li><li>S3 requests: Minimal cost for low traffic</li><li>CloudFront (if used): Free tier covers most staging use</li><li>GitHub Actions: Free for public repos, 2000 min/month for private</li></ul><h2 id=security-best-practices>Security Best Practices<a class=anchor href=#security-best-practices>#</a></h2><ol><li>✅ Use dedicated IAM user for deployments</li><li>✅ Apply least-privilege IAM policy</li><li>✅ Store credentials as GitHub Secrets (never in code)</li><li>✅ Rotate access keys periodically</li><li>✅ Use CloudFront with custom domain for production</li><li>✅ Consider password-protecting staging site (CloudFront Functions or Lambda@Edge)</li></ol><h2 id=next-steps>Next Steps<a class=anchor href=#next-steps>#</a></h2><p>Once this is working for staging:</p><ol><li>Create a separate workflow for production deployments</li><li>Only trigger production on merges to <code>main</code> branch</li><li>Use different S3 bucket for production</li><li>Add approval gates for production deployments</li></ol><hr><p><strong>Questions?</strong></p><ul><li>Check GitHub Actions logs for detailed error messages</li><li>Review AWS CloudWatch logs</li><li>Refer to Hugo documentation: <a href=https://gohugo.io/hosting-and-deployment/>https://gohugo.io/hosting-and-deployment/</a></li></ul><p><strong>Last Updated:</strong> December 29, 2025</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#deployment-guide---three-environment-setup>Deployment Guide - Three Environment Setup</a><ul><li><a href=#overview>Overview</a></li><li><a href=#how-it-works>How It Works</a><ul><li><a href=#dev-environment-rapid-iteration>DEV Environment (Rapid Iteration)</a></li><li><a href=#staging-environment-business-review>STAGING Environment (Business Review)</a></li><li><a href=#production-environment-live-site>PRODUCTION Environment (Live Site)</a></li></ul></li><li><a href=#initial-setup-one-time-only>Initial Setup (One-Time Only)</a><ul><li><a href=#step-1-create-aws-iam-user-if-you-dont-have-one>Step 1: Create AWS IAM User (if you don&rsquo;t have one)</a></li><li><a href=#step-2-add-secrets-to-github>Step 2: Add Secrets to GitHub</a></li><li><a href=#step-3-add-variables-optional-but-recommended>Step 3: Add Variables (Optional but Recommended)</a></li></ul></li><li><a href=#custom-iam-policy-recommended-for-security>Custom IAM Policy (Recommended for Security)</a></li><li><a href=#usage>Usage</a><ul><li><a href=#automatic-deployment-to-dev>Automatic Deployment to DEV</a></li><li><a href=#automatic-deployment-to-staging>Automatic Deployment to STAGING</a></li><li><a href=#manual-deployment>Manual Deployment</a></li></ul></li><li><a href=#viewing-your-changes>Viewing Your Changes</a><ul><li><a href=#on-dev-after-pushing-to-claude-branch>On DEV (After pushing to claude/* branch)</a></li><li><a href=#on-staging-after-merging-pr-to-staging>On STAGING (After merging PR to staging)</a></li></ul></li><li><a href=#workflow-status>Workflow Status</a></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#deployment-failed>Deployment Failed</a></li><li><a href=#site-not-updating>Site Not Updating</a></li><li><a href=#hugo-build-errors>Hugo Build Errors</a></li></ul></li><li><a href=#s3-bucket-configuration>S3 Bucket Configuration</a><ul><li><a href=#bucket-policy-for-public-access>Bucket Policy (for public access)</a></li></ul></li><li><a href=#cost-considerations>Cost Considerations</a></li><li><a href=#security-best-practices>Security Best Practices</a></li><li><a href=#next-steps>Next Steps</a></li></ul></li></ul></nav></div></aside></main></body></html>