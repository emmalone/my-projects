<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Development Workflow - From Iteration to Production# Overview: Three Development Scenarios# Updated: The workflow has been reconfigured for 3 distinct development scenarios:
Scenario Branch Testing Deploy to Dev Deploy to Staging Laptop/Desktop main Local (hugo server) ✅ Auto (on push to main) Manual (Python script) iPhone/Claude Code claude/** Dev environment ✅ Auto (on push to claude/**) Manual (Python script) Staging N/A N/A N/A Manual (Python script) Environment Details# Environment Purpose Deployed How Who Uses It Local Laptop/desktop development hugo server You (developer) on laptop/desktop Dev Remote preview (iPhone work) claude/* branches (auto) You (developer) on iPhone Staging Business review Manual Python script ONLY Business users for final review Production Live site Manual Python script ONLY Public customers Key Changes from Previous Workflow# ❌ No staging branch - Removed auto-deploy to staging ✅ Manual staging control - You decide when staging updates via Python script ✅ Dev auto-deploys from main AND claude/ - Dev reflects all committed code ✅ Always-current dev environment - Whether working on laptop or iPhone, dev stays in sync ✅ Laptop work auto-deploys to dev - Push to main triggers dev deployment ✅ iPhone work auto-deploys to dev - Push to claude/** triggers dev deployment The Complete Workflow# Scenario 1: Laptop/Desktop Development# Goal: Develop and test locally, auto-deploy to dev, manual control over staging
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/documents/klm-migrate/development_workflow/"><meta property="og:site_name" content="My Projects - Documentation Hub"><meta property="og:title" content="DEVELOPMENT_WORKFLOW"><meta property="og:description" content="Development Workflow - From Iteration to Production# Overview: Three Development Scenarios# Updated: The workflow has been reconfigured for 3 distinct development scenarios:
Scenario Branch Testing Deploy to Dev Deploy to Staging Laptop/Desktop main Local (hugo server) ✅ Auto (on push to main) Manual (Python script) iPhone/Claude Code claude/** Dev environment ✅ Auto (on push to claude/**) Manual (Python script) Staging N/A N/A N/A Manual (Python script) Environment Details# Environment Purpose Deployed How Who Uses It Local Laptop/desktop development hugo server You (developer) on laptop/desktop Dev Remote preview (iPhone work) claude/* branches (auto) You (developer) on iPhone Staging Business review Manual Python script ONLY Business users for final review Production Live site Manual Python script ONLY Public customers Key Changes from Previous Workflow# ❌ No staging branch - Removed auto-deploy to staging ✅ Manual staging control - You decide when staging updates via Python script ✅ Dev auto-deploys from main AND claude/ - Dev reflects all committed code ✅ Always-current dev environment - Whether working on laptop or iPhone, dev stays in sync ✅ Laptop work auto-deploys to dev - Push to main triggers dev deployment ✅ iPhone work auto-deploys to dev - Push to claude/** triggers dev deployment The Complete Workflow# Scenario 1: Laptop/Desktop Development# Goal: Develop and test locally, auto-deploy to dev, manual control over staging"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="documents"><meta property="article:published_time" content="2026-01-01T23:45:19+00:00"><meta property="article:modified_time" content="2026-01-01T23:45:19+00:00"><meta itemprop=name content="DEVELOPMENT_WORKFLOW"><meta itemprop=description content="Development Workflow - From Iteration to Production# Overview: Three Development Scenarios# Updated: The workflow has been reconfigured for 3 distinct development scenarios:
Scenario Branch Testing Deploy to Dev Deploy to Staging Laptop/Desktop main Local (hugo server) ✅ Auto (on push to main) Manual (Python script) iPhone/Claude Code claude/** Dev environment ✅ Auto (on push to claude/**) Manual (Python script) Staging N/A N/A N/A Manual (Python script) Environment Details# Environment Purpose Deployed How Who Uses It Local Laptop/desktop development hugo server You (developer) on laptop/desktop Dev Remote preview (iPhone work) claude/* branches (auto) You (developer) on iPhone Staging Business review Manual Python script ONLY Business users for final review Production Live site Manual Python script ONLY Public customers Key Changes from Previous Workflow# ❌ No staging branch - Removed auto-deploy to staging ✅ Manual staging control - You decide when staging updates via Python script ✅ Dev auto-deploys from main AND claude/ - Dev reflects all committed code ✅ Always-current dev environment - Whether working on laptop or iPhone, dev stays in sync ✅ Laptop work auto-deploys to dev - Push to main triggers dev deployment ✅ iPhone work auto-deploys to dev - Push to claude/** triggers dev deployment The Complete Workflow# Scenario 1: Laptop/Desktop Development# Goal: Develop and test locally, auto-deploy to dev, manual control over staging"><meta itemprop=datePublished content="2026-01-01T23:45:19+00:00"><meta itemprop=dateModified content="2026-01-01T23:45:19+00:00"><meta itemprop=wordCount content="2471"><title>DEVELOPMENT_WORKFLOW | My Projects - Documentation Hub</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://localhost:1313/documents/klm-migrate/development_workflow/><link rel=stylesheet href=/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj+RQ9XBXU=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.da5a5af27f9bdea67bd6f07f3142824ec301e0c7f9d37c0fc61aefc961834a9e.js integrity="sha256-2lpa8n+b3qZ71vB/MUKCTsMB4Mf503wPxhrvyWGDSp4=" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-documents"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>My Projects - Documentation Hub</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/icons/menu.svg class=book-icon alt=Menu></label><h3>DEVELOPMENT_WORKFLOW</h3><label for=toc-control><img src=/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#development-workflow---from-iteration-to-production>Development Workflow - From Iteration to Production</a><ul><li><a href=#overview-three-development-scenarios>Overview: Three Development Scenarios</a><ul><li><a href=#environment-details>Environment Details</a></li><li><a href=#key-changes-from-previous-workflow>Key Changes from Previous Workflow</a></li></ul></li><li><a href=#the-complete-workflow>The Complete Workflow</a><ul><li><a href=#scenario-1-laptopdesktop-development>Scenario 1: Laptop/Desktop Development</a></li><li><a href=#scenario-2-iphone-development-with-auto-preview>Scenario 2: iPhone Development with Auto-Preview</a></li><li><a href=#scenario-3-deploying-to-staging-manual-control>Scenario 3: Deploying to Staging (Manual Control)</a></li><li><a href=#phase-3-business-review-staging-environment>Phase 3: Business Review (STAGING Environment)</a></li><li><a href=#phase-4-production-deployment-prod-environment>Phase 4: Production Deployment (PROD Environment)</a></li></ul></li><li><a href=#quick-reference-when-to-do-what>Quick Reference: When to Do What</a><ul><li><a href=#when-to-commit--push>When to Commit & Push</a></li><li><a href=#when-to-create-a-pr>When to Create a PR</a></li><li><a href=#when-to-merge>When to Merge</a></li><li><a href=#when-to-review-code>When to Review Code</a></li></ul></li><li><a href=#branching-strategy>Branching Strategy</a></li><li><a href=#environment-configuration>Environment Configuration</a><ul><li><a href=#aws-secrets-needed-github-repo-secrets>AWS Secrets Needed (GitHub Repo Secrets)</a></li><li><a href=#current-github-secrets>Current GitHub Secrets</a></li><li><a href=#why-no-stagingproduction-secrets>Why No Staging/Production Secrets?</a></li></ul></li><li><a href=#example-complete-feature-development>Example: Complete Feature Development</a><ul><li><a href=#scenario-add-new-landing-page>Scenario: Add New Landing Page</a></li></ul></li><li><a href=#best-practices>Best Practices</a><ul><li><a href=#for-development-dev>For Development (DEV)</a></li><li><a href=#for-staging>For Staging</a></li><li><a href=#for-production-main>For Production (Main)</a></li><li><a href=#for-code-review>For Code Review</a></li></ul></li><li><a href=#comparison-your-workflow-vs-traditional>Comparison: Your Workflow vs Traditional</a><ul><li><a href=#traditional-workflow-manual>Traditional Workflow (Manual)</a></li><li><a href=#your-workflow-automated>Your Workflow (Automated)</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#i-want-to-see-my-changes-but-theyre-not-on-staging>&ldquo;I want to see my changes but they&rsquo;re not on staging&rdquo;</a></li><li><a href=#business-users-say-staging-is-broken>&ldquo;Business users say staging is broken&rdquo;</a></li><li><a href=#i-made-changes-but-dont-see-them-on-any-environment>&ldquo;I made changes but don&rsquo;t see them on any environment&rdquo;</a></li><li><a href=#how-do-i-undo-a-merge-to-staging>&ldquo;How do I undo a merge to staging?&rdquo;</a></li></ul></li><li><a href=#summary-the-three-questions>Summary: The Three Questions</a><ul><li><a href=#1-should-i-commit-and-push-this-code>1. &ldquo;Should I commit and push this code?&rdquo;</a></li><li><a href=#2-should-i-create-a-pr>2. &ldquo;Should I create a PR?&rdquo;</a></li><li><a href=#3-should-i-merge-this-pr>3. &ldquo;Should I merge this PR?&rdquo;</a></li></ul></li><li><a href=#quick-start-checklist>Quick Start Checklist</a><ul><li><a href=#initial-setup-one-time>Initial Setup (One-Time)</a></li><li><a href=#daily-workflow>Daily Workflow</a></li></ul></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=development-workflow---from-iteration-to-production>Development Workflow - From Iteration to Production<a class=anchor href=#development-workflow---from-iteration-to-production>#</a></h1><h2 id=overview-three-development-scenarios>Overview: Three Development Scenarios<a class=anchor href=#overview-three-development-scenarios>#</a></h2><p><strong>Updated:</strong> The workflow has been reconfigured for 3 distinct development scenarios:</p><table><thead><tr><th>Scenario</th><th>Branch</th><th>Testing</th><th>Deploy to Dev</th><th>Deploy to Staging</th></tr></thead><tbody><tr><td><strong>Laptop/Desktop</strong></td><td><code>main</code></td><td>Local (hugo server)</td><td>✅ Auto (on push to main)</td><td>Manual (Python script)</td></tr><tr><td><strong>iPhone/Claude Code</strong></td><td><code>claude/**</code></td><td>Dev environment</td><td>✅ Auto (on push to claude/**)</td><td>Manual (Python script)</td></tr><tr><td><strong>Staging</strong></td><td>N/A</td><td>N/A</td><td>N/A</td><td>Manual (Python script)</td></tr></tbody></table><h3 id=environment-details>Environment Details<a class=anchor href=#environment-details>#</a></h3><table><thead><tr><th>Environment</th><th>Purpose</th><th>Deployed How</th><th>Who Uses It</th></tr></thead><tbody><tr><td><strong>Local</strong></td><td>Laptop/desktop development</td><td><code>hugo server</code></td><td>You (developer) on laptop/desktop</td></tr><tr><td><strong>Dev</strong></td><td>Remote preview (iPhone work)</td><td><code>claude/*</code> branches (auto)</td><td>You (developer) on iPhone</td></tr><tr><td><strong>Staging</strong></td><td>Business review</td><td>Manual Python script ONLY</td><td>Business users for final review</td></tr><tr><td><strong>Production</strong></td><td>Live site</td><td>Manual Python script ONLY</td><td>Public customers</td></tr></tbody></table><h3 id=key-changes-from-previous-workflow>Key Changes from Previous Workflow<a class=anchor href=#key-changes-from-previous-workflow>#</a></h3><ul><li>❌ <strong>No staging branch</strong> - Removed auto-deploy to staging</li><li>✅ <strong>Manual staging control</strong> - You decide when staging updates via Python script</li><li>✅ <strong>Dev auto-deploys from main AND claude/</strong> - Dev reflects all committed code</li><li>✅ <strong>Always-current dev environment</strong> - Whether working on laptop or iPhone, dev stays in sync</li><li>✅ <strong>Laptop work auto-deploys to dev</strong> - Push to main triggers dev deployment</li><li>✅ <strong>iPhone work auto-deploys to dev</strong> - Push to <code>claude/**</code> triggers dev deployment</li></ul><hr><h2 id=the-complete-workflow>The Complete Workflow<a class=anchor href=#the-complete-workflow>#</a></h2><h3 id=scenario-1-laptopdesktop-development>Scenario 1: Laptop/Desktop Development<a class=anchor href=#scenario-1-laptopdesktop-development>#</a></h3><p><strong>Goal:</strong> Develop and test locally, auto-deploy to dev, manual control over staging</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Step 1: Local development</span>
</span></span><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site
</span></span><span style=display:flex><span>git pull origin main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Step 2: Make changes</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ... edit files ...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Step 3: Test locally</span>
</span></span><span style=display:flex><span>hugo server -D --bind 0.0.0.0
</span></span><span style=display:flex><span><span style=color:#75715e># Visit: http://localhost:1313</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Test thoroughly</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Step 4: Commit to main</span>
</span></span><span style=display:flex><span>git add .
</span></span><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;Update homepage hero section&#34;</span>
</span></span><span style=display:flex><span>git push origin main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Step 5: Automatic deployment to dev (30 seconds)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># GitHub Actions deploys to: http://dev-klmhugoweb.s3-website-us-east-1.amazonaws.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Dev environment now has your latest changes</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Step 6: Deploy to staging (when ready for review)</span>
</span></span><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 publish_to_staging.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Staging live at: https://www.klmcrm.com</span></span></span></code></pre></div><p><strong>Key Points:</strong></p><ul><li>✅ Test everything locally before committing</li><li>✅ Every push to main auto-deploys to dev environment</li><li>✅ Dev environment always current for iPhone preview</li><li>✅ No auto-deploy to staging - you control when staging updates</li><li>✅ Full control over staging deployment timing</li><li>✅ Perfect for focused development work</li></ul><hr><h3 id=scenario-2-iphone-development-with-auto-preview>Scenario 2: iPhone Development with Auto-Preview<a class=anchor href=#scenario-2-iphone-development-with-auto-preview>#</a></h3><p><strong>Goal:</strong> Try ideas quickly, iterate on iPhone, preview instantly</p><h4 id=on-your-iphone-with-claude-code>On Your iPhone with Claude Code:<a class=anchor href=#on-your-iphone-with-claude-code>#</a></h4><pre tabindex=0><code>You: &#34;Create a new landing page with video placeholder&#34;
     ↓
Claude: Creates files, commits to claude/create-landing-page-xyz
     ↓
Auto-deployed to DEV bucket (30 seconds)
     ↓
You: View at dev-klmhugoweb.s3-website-us-east-1.amazonaws.com on your iPhone
     ↓
You: &#34;The video placeholder is too small, make it bigger&#34;
     ↓
Claude: Updates files, commits to same branch
     ↓
Auto-deployed to DEV again (30 seconds)
     ↓
You: Review again, iterate until satisfied</code></pre><p><strong>Key Points:</strong></p><ul><li>✅ Commits happen automatically as you work with Claude</li><li>✅ Each push auto-deploys to DEV</li><li>✅ Iterate as many times as needed</li><li>✅ Preview on your iPhone instantly</li><li>✅ Code is on <code>claude/*</code> branch, NOT in main yet</li></ul><p><strong>When to Move Forward:</strong></p><ul><li>Feature works as expected</li><li>You&rsquo;ve tested it on DEV</li><li>Ready to merge to main</li></ul><h4 id=merging-iphone-work-to-main>Merging iPhone Work to Main:<a class=anchor href=#merging-iphone-work-to-main>#</a></h4><p><strong>From iPhone (Claude Code):</strong></p><pre tabindex=0><code>You: &#34;This landing page looks good. Merge to main&#34;
     ↓
Claude: Creates PR from claude/create-landing-page-xyz → main
     ↓
PR created on GitHub with description of changes
     ↓
You: Review and approve PR
     ↓
Claude: Merges to main (or you merge on GitHub)
     ↓
GitHub Actions detects push to main
     ↓
Auto-deploys to DEV environment again (30 seconds)
     ↓
Dev now reflects merged code from main branch</code></pre><p><strong>From Desktop:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Pull the merged changes</span>
</span></span><span style=display:flex><span>git pull origin main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Dev environment already has latest code (auto-deployed from main)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Deploy to staging when ready for business review</span>
</span></span><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 publish_to_staging.py</span></span></code></pre></div><hr><h3 id=scenario-3-deploying-to-staging-manual-control>Scenario 3: Deploying to Staging (Manual Control)<a class=anchor href=#scenario-3-deploying-to-staging-manual-control>#</a></h3><p><strong>Goal:</strong> Deploy approved changes for business review</p><p><strong>Always from Laptop/Desktop - Never Auto-Deploys</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 publish_to_staging.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Script does:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 1. Builds Hugo with staging baseURL (https://www.klmcrm.com)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. Syncs to klmcrm.com S3 bucket</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Invalidates CloudFront cache</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 4. Verifies deployment</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 5. Live at: https://www.klmcrm.com</span></span></span></code></pre></div><p><strong>When to Deploy:</strong></p><ul><li>✅ Feature is complete and tested</li><li>✅ Code is merged to main</li><li>✅ Ready for business stakeholders to review</li><li>✅ You have time to support if issues arise</li></ul><p><strong>Key Points:</strong></p><ul><li>❌ NO auto-deploy to staging</li><li>✅ YOU control when staging updates</li><li>✅ Deploy only when ready for review</li><li>✅ Prevents accidental staging deployments</li></ul><hr><h3 id=phase-3-business-review-staging-environment>Phase 3: Business Review (STAGING Environment)<a class=anchor href=#phase-3-business-review-staging-environment>#</a></h3><p><strong>Goal:</strong> Let business users review before going live</p><p><strong>Who Reviews:</strong></p><ul><li>Business stakeholders</li><li>Content team</li><li>Marketing team</li><li>Anyone who needs to approve changes</li></ul><p><strong>What They Review:</strong></p><ul><li>Content accuracy</li><li>Visual design</li><li>User experience</li><li>Brand consistency</li></ul><p><strong>How Staging Gets Updated:</strong></p><pre tabindex=0><code>YOU deploy to staging manually from laptop:
     ↓
Business User: Reviews at https://www.klmcrm.com
     ↓
Business User: &#34;The landing page looks great, but can we change
                the headline to &#39;Protecting What Matters Most&#39;?&#34;
     ↓
You (on iPhone): Tell Claude to update the headline
     ↓
Claude: Makes change on NEW claude/update-headline-abc branch
     ↓
Auto-deploys to DEV for you to review (30 seconds)
     ↓
You: Review on DEV at dev-klmhugoweb URL, approve
     ↓
Claude: Merges to main
     ↓
You (on laptop): python3 publish_to_staging.py
     ↓
Business user reviews updated staging site
     ↓
Business user: &#34;Approved! Ready for production&#34;</code></pre><p><strong>Key Points:</strong></p><ul><li>✅ YOU control when staging updates</li><li>✅ Business users never see incomplete work</li><li>✅ Preview changes on dev first</li><li>✅ Deploy to staging only when ready</li></ul><hr><h3 id=phase-4-production-deployment-prod-environment>Phase 4: Production Deployment (PROD Environment)<a class=anchor href=#phase-4-production-deployment-prod-environment>#</a></h3><p><strong>Goal:</strong> Deploy approved changes to live site</p><p><strong>When to Deploy:</strong></p><ul><li>✅ All business stakeholders approved</li><li>✅ Thoroughly tested on staging</li><li>✅ No known bugs or issues</li><li>✅ Ready for public</li></ul><h4 id=option-1-manual-pr-to-main-recommended>Option 1: Manual PR to Main (Recommended)<a class=anchor href=#option-1-manual-pr-to-main-recommended>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create PR from staging to main</span>
</span></span><span style=display:flex><span>1. Go to GitHub
</span></span><span style=display:flex><span>2. Create new PR: staging → main
</span></span><span style=display:flex><span>3. Add description: <span style=color:#e6db74>&#34;Deploy landing page to production&#34;</span>
</span></span><span style=display:flex><span>4. Review changes one final time
</span></span><span style=display:flex><span>5. Merge PR</span></span></code></pre></div><p><strong>What Happens:</strong></p><ul><li>Code merges to <code>main</code> branch</li><li>GitHub Actions deploys to PRODUCTION bucket</li><li>Live site updates for customers</li></ul><h4 id=option-2-fast-forward-merge-for-simple-changes>Option 2: Fast-Forward Merge (for simple changes)<a class=anchor href=#option-2-fast-forward-merge-for-simple-changes>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout main
</span></span><span style=display:flex><span>git merge staging --ff-only
</span></span><span style=display:flex><span>git push origin main</span></span></code></pre></div><hr><h2 id=quick-reference-when-to-do-what>Quick Reference: When to Do What<a class=anchor href=#quick-reference-when-to-do-what>#</a></h2><h3 id=when-to-commit--push>When to Commit & Push<a class=anchor href=#when-to-commit--push>#</a></h3><ul><li><strong>Automatically:</strong> Every time Claude makes changes for you</li><li><strong>Manually:</strong> After every logical unit of work</li><li><strong>Frequency:</strong> Often! Commit early, commit often</li></ul><h3 id=when-to-create-a-pr>When to Create a PR<a class=anchor href=#when-to-create-a-pr>#</a></h3><ul><li>✅ Feature is working on DEV</li><li>✅ You&rsquo;ve tested it yourself</li><li>✅ Ready for others to review</li><li>✅ Ready to move to staging for business review</li></ul><h3 id=when-to-merge>When to Merge<a class=anchor href=#when-to-merge>#</a></h3><ul><li>✅ Code review passed (you reviewed your own code)</li><li>✅ All checks green (GitHub Actions build succeeded)</li><li>✅ Tested on DEV environment</li><li><strong>Merge to staging:</strong> When ready for business review</li><li><strong>Merge to main:</strong> When business approves for production</li></ul><h3 id=when-to-review-code>When to Review Code<a class=anchor href=#when-to-review-code>#</a></h3><ul><li><strong>Before merging to staging:</strong> Review your own changes</li><li><strong>Before merging to main:</strong> Final review (can be quick if already reviewed)</li><li><strong>During development:</strong> Continuous review as you work</li></ul><hr><h2 id=branching-strategy>Branching Strategy<a class=anchor href=#branching-strategy>#</a></h2><pre tabindex=0><code>main (primary development branch)
  ↑
  ├── claude/create-landing-page-xyz (iPhone dev, auto-deploys to dev)
  ├── claude/update-headline-abc (iPhone dev, auto-deploys to dev)
  └── claude/fix-contact-form-def (iPhone dev, auto-deploys to dev)</code></pre><p><strong>Branch Naming:</strong></p><ul><li><code>main</code> - Primary development branch (laptop/desktop work + merged iPhone work)</li><li><code>claude/*</code> - iPhone development branches (auto-created by Claude Code)</li></ul><p><strong>Branch Lifetime:</strong></p><ul><li><code>main</code> - Permanent branch</li><li><code>claude/*</code> - Temporary, deleted after merging to main</li></ul><p><strong>Deployment Strategy:</strong></p><ul><li><code>main</code> branch → Auto-deploy to dev-klmhugoweb S3 bucket (GitHub Actions)</li><li><code>claude/*</code> branches → Auto-deploy to dev-klmhugoweb S3 bucket (GitHub Actions)</li><li><code>main</code> branch → Manual deploy to staging (klmcrm.com) via Python script</li><li>Staging → Manual deploy to production (klminsurance.com) via Python script</li></ul><p><strong>Key Changes:</strong></p><ul><li>❌ <strong>No staging branch</strong> - Removed from git workflow</li><li>✅ <strong>Staging is deployment target</strong> - Not a git branch</li><li>✅ <strong>Dev auto-deploys from main AND claude/</strong> - Always current</li><li>✅ <strong>Manual control over staging/production</strong> - YOU decide when they update</li></ul><hr><h2 id=environment-configuration>Environment Configuration<a class=anchor href=#environment-configuration>#</a></h2><h3 id=aws-secrets-needed-github-repo-secrets>AWS Secrets Needed (GitHub Repo Secrets)<a class=anchor href=#aws-secrets-needed-github-repo-secrets>#</a></h3><p><strong>For DEV Environment (Auto-Deploy):</strong></p><ul><li><code>AWS_ACCESS_KEY_ID</code> - AWS credentials for deployment</li><li><code>AWS_SECRET_ACCESS_KEY</code> - AWS credentials for deployment</li><li><code>AWS_REGION</code> - us-east-1</li><li><code>S3_DEV_BUCKET</code> - dev-klmhugoweb</li></ul><p><strong>For STAGING Environment:</strong></p><ul><li>❌ <strong>No GitHub secrets needed</strong> - Staging deploys manually via Python script on laptop</li></ul><p><strong>For PRODUCTION:</strong></p><ul><li>❌ <strong>No GitHub secrets needed</strong> - Production deploys manually via Python script on laptop</li></ul><h3 id=current-github-secrets>Current GitHub Secrets<a class=anchor href=#current-github-secrets>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gh secret list
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Output:</span>
</span></span><span style=display:flex><span>AWS_ACCESS_KEY_ID
</span></span><span style=display:flex><span>AWS_SECRET_ACCESS_KEY
</span></span><span style=display:flex><span>AWS_REGION
</span></span><span style=display:flex><span>S3_DEV_BUCKET</span></span></code></pre></div><h3 id=why-no-stagingproduction-secrets>Why No Staging/Production Secrets?<a class=anchor href=#why-no-stagingproduction-secrets>#</a></h3><p>Staging and production deployments are <strong>intentionally manual</strong> and run from your laptop using the Python scripts:</p><ul><li><code>publish_to_staging.py</code> - Uses local AWS credentials</li><li><code>publish_to_production.py</code> - Uses local AWS credentials</li></ul><p>This gives you complete control over when these environments update.</p><hr><h2 id=example-complete-feature-development>Example: Complete Feature Development<a class=anchor href=#example-complete-feature-development>#</a></h2><h3 id=scenario-add-new-landing-page>Scenario: Add New Landing Page<a class=anchor href=#scenario-add-new-landing-page>#</a></h3><h4 id=day-1-development-monday-morning-on-iphone>Day 1: Development (Monday morning, on iPhone)<a class=anchor href=#day-1-development-monday-morning-on-iphone>#</a></h4><pre tabindex=0><code>9:00 AM - You: &#34;Create a new landing page with video placeholder&#34;
9:01 AM - Claude: Creates files, commits to claude/create-landing-page-xyz
9:04 AM - Auto-deployed to DEV
9:05 AM - You: Review on iPhone at dev.klm-insurance.com/landing

9:10 AM - You: &#34;Make the video placeholder bigger and add a border&#34;
9:11 AM - Claude: Updates files, commits to same branch
9:14 AM - Auto-deployed to DEV
9:15 AM - You: Review changes, looks better

9:20 AM - You: &#34;Add some example text in the description&#34;
9:21 AM - Claude: Updates content, commits
9:24 AM - Auto-deployed to DEV
9:25 AM - You: Perfect! Feature is done.

9:30 AM - You: &#34;Create a PR to merge this into staging&#34;
9:31 AM - Claude: Creates PR on GitHub</code></pre><h4 id=day-1-code-review-monday-afternoon>Day 1: Code Review (Monday afternoon)<a class=anchor href=#day-1-code-review-monday-afternoon>#</a></h4><pre tabindex=0><code>2:00 PM - You: Open GitHub PR on desktop (or iPhone)
2:05 PM - Review code changes, everything looks good
2:10 PM - Check GitHub Actions - build passed ✅
2:15 PM - Merge PR to main
2:18 PM - Auto-deployed to DEV (from main branch)
2:20 PM - Dev environment updated with merged code
2:25 PM - Send email: &#34;New landing page ready for review. Testing on dev before staging.&#34;</code></pre><h4 id=day-2-business-review-tuesday>Day 2: Business Review (Tuesday)<a class=anchor href=#day-2-business-review-tuesday>#</a></h4><pre tabindex=0><code>10:00 AM - Deploy to staging for business review
10:01 AM - Run: python3 publish_to_staging.py
10:03 AM - Staging deployed: https://www.klmcrm.com
10:05 AM - Marketing team reviews staging site
11:30 AM - Feedback: &#34;Can we change the headline and add our tagline?&#34;

12:00 PM - You (on iPhone): &#34;Update landing page headline to &#39;Protecting What Matters Most&#39; and add tagline&#34;
12:01 PM - Claude: Makes changes on claude/update-landing-page-headlines
12:04 PM - Auto-deployed to DEV
12:05 PM - You: Review on DEV, looks good
12:10 PM - Merge to main
12:13 PM - Auto-deployed to DEV again (from main)
12:15 PM - Run: python3 publish_to_staging.py
12:17 PM - Staging updated
12:18 PM - Email marketing team: &#34;Updated version ready&#34;

2:00 PM - Marketing approves: &#34;Looks great! Ready to go live&#34;</code></pre><h4 id=day-2-production-deploy-tuesday-afternoon>Day 2: Production Deploy (Tuesday afternoon)<a class=anchor href=#day-2-production-deploy-tuesday-afternoon>#</a></h4><pre tabindex=0><code>3:00 PM - Run: python3 publish_to_production.py
3:01 PM - Type: DEPLOY TO PRODUCTION (confirmation)
3:05 PM - Production deployed
3:10 PM - Landing page is LIVE at klm-insurance.com/landing</code></pre><hr><h2 id=best-practices>Best Practices<a class=anchor href=#best-practices>#</a></h2><h3 id=for-development-dev>For Development (DEV)<a class=anchor href=#for-development-dev>#</a></h3><ul><li>✅ Commit often, even if not perfect</li><li>✅ Test thoroughly before creating PR</li><li>✅ Keep DEV environment &ldquo;messy&rdquo; - it&rsquo;s for experimentation</li><li>✅ Use descriptive commit messages</li><li>✅ Don&rsquo;t worry about breaking DEV - that&rsquo;s what it&rsquo;s for!</li></ul><h3 id=for-staging>For Staging<a class=anchor href=#for-staging>#</a></h3><ul><li>✅ Only merge reviewed code</li><li>✅ Keep staging stable - business users rely on it</li><li>✅ Test everything before merging from staging to main</li><li>✅ Staging should always be &ldquo;demo-ready&rdquo;</li><li>✅ Don&rsquo;t merge experimental features here</li></ul><h3 id=for-production-main>For Production (Main)<a class=anchor href=#for-production-main>#</a></h3><ul><li>✅ Only merge from staging (never from claude/* branches directly)</li><li>✅ Require business approval before deploying</li><li>✅ Tag releases (e.g., <code>v1.0.0</code>, <code>v1.1.0</code>)</li><li>✅ Have rollback plan ready</li><li>✅ Deploy during low-traffic times when possible</li></ul><h3 id=for-code-review>For Code Review<a class=anchor href=#for-code-review>#</a></h3><ul><li>✅ Review your own code before creating PR</li><li>✅ Check for sensitive data (API keys, passwords)</li><li>✅ Verify build passes</li><li>✅ Test on DEV environment first</li><li>✅ Write clear PR descriptions</li></ul><hr><h2 id=comparison-your-workflow-vs-traditional>Comparison: Your Workflow vs Traditional<a class=anchor href=#comparison-your-workflow-vs-traditional>#</a></h2><h3 id=traditional-workflow-manual>Traditional Workflow (Manual)<a class=anchor href=#traditional-workflow-manual>#</a></h3><pre tabindex=0><code>1. Write code on desktop
2. Manually test locally with Hugo server
3. Manually commit and push
4. Manually create PR
5. Wait for review
6. Manually merge
7. Manually deploy via CLI or scripts
8. Repeat for every environment</code></pre><h3 id=your-workflow-automated>Your Workflow (Automated)<a class=anchor href=#your-workflow-automated>#</a></h3><pre tabindex=0><code>1. Tell Claude what you want (from iPhone!)
2. Auto-deployed to DEV - test on your phone
3. Iterate quickly with Claude
4. Create PR (one command to Claude)
5. Review code (on phone or desktop)
6. Merge PR
7. Auto-deployed to staging
8. Business approves
9. Merge to main
10. Auto-deployed to production</code></pre><p><strong>Time Saved:</strong> 80%+ of deployment overhead eliminated!</p><hr><h2 id=troubleshooting>Troubleshooting<a class=anchor href=#troubleshooting>#</a></h2><h3 id=i-want-to-see-my-changes-but-theyre-not-on-staging>&ldquo;I want to see my changes but they&rsquo;re not on staging&rdquo;<a class=anchor href=#i-want-to-see-my-changes-but-theyre-not-on-staging>#</a></h3><p><strong>Cause:</strong> You pushed to a <code>claude/*</code> branch
<strong>Solution:</strong> That&rsquo;s correct! Changes deploy to DEV first. Create PR to staging when ready.</p><h3 id=business-users-say-staging-is-broken>&ldquo;Business users say staging is broken&rdquo;<a class=anchor href=#business-users-say-staging-is-broken>#</a></h3><p><strong>Cause:</strong> Incomplete feature was merged to staging
<strong>Solution:</strong></p><ol><li>Test thoroughly on DEV first</li><li>Only merge complete features to staging</li><li>If needed, revert the PR or hotfix</li></ol><h3 id=i-made-changes-but-dont-see-them-on-any-environment>&ldquo;I made changes but don&rsquo;t see them on any environment&rdquo;<a class=anchor href=#i-made-changes-but-dont-see-them-on-any-environment>#</a></h3><p><strong>Cause:</strong> GitHub Actions might have failed
<strong>Solution:</strong></p><ol><li>Check: <a href=https://github.com/emmalone/klm-migrate/actions>https://github.com/emmalone/klm-migrate/actions</a></li><li>Look for red X marks</li><li>Click to see error details</li><li>Fix the issue and push again</li></ol><h3 id=how-do-i-undo-a-merge-to-staging>&ldquo;How do I undo a merge to staging?&rdquo;<a class=anchor href=#how-do-i-undo-a-merge-to-staging>#</a></h3><p><strong>Option 1: Revert the merge</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout staging
</span></span><span style=display:flex><span>git revert -m <span style=color:#ae81ff>1</span> &lt;merge-commit-sha&gt;
</span></span><span style=display:flex><span>git push origin staging</span></span></code></pre></div><p><strong>Option 2: Use Claude Code (easier)</strong></p><pre tabindex=0><code>You: &#34;Revert the last merge to staging - the landing page change needs more work&#34;
Claude: Reverts the merge for you</code></pre><hr><h2 id=summary-the-three-questions>Summary: The Three Questions<a class=anchor href=#summary-the-three-questions>#</a></h2><h3 id=1-should-i-commit-and-push-this-code>1. &ldquo;Should I commit and push this code?&rdquo;<a class=anchor href=#1-should-i-commit-and-push-this-code>#</a></h3><p><strong>YES if:</strong></p><ul><li>You made any changes (even small ones)</li><li>You want to see it on DEV</li><li>You want to save your work</li></ul><p><strong>Commits are automatic</strong> when using Claude Code - just keep working!</p><h3 id=2-should-i-create-a-pr>2. &ldquo;Should I create a PR?&rdquo;<a class=anchor href=#2-should-i-create-a-pr>#</a></h3><p><strong>YES if:</strong></p><ul><li>✅ Feature works on DEV</li><li>✅ You&rsquo;ve tested it yourself</li><li>✅ Ready for business users to review</li><li>✅ Code is clean and reviewed</li></ul><p><strong>NO if:</strong></p><ul><li>❌ Still experimenting</li><li>❌ Feature incomplete</li><li>❌ Haven&rsquo;t tested on DEV yet</li><li>❌ Known bugs exist</li></ul><h3 id=3-should-i-merge-this-pr>3. &ldquo;Should I merge this PR?&rdquo;<a class=anchor href=#3-should-i-merge-this-pr>#</a></h3><p><strong>To STAGING - YES if:</strong></p><ul><li>✅ Code reviewed</li><li>✅ Build passes (green check)</li><li>✅ Tested on DEV</li><li>✅ Ready for business review</li></ul><p><strong>To MAIN - YES if:</strong></p><ul><li>✅ Business stakeholders approved</li><li>✅ Thoroughly tested on staging</li><li>✅ No known issues</li><li>✅ Ready for customers</li></ul><hr><h2 id=quick-start-checklist>Quick Start Checklist<a class=anchor href=#quick-start-checklist>#</a></h2><h3 id=initial-setup-one-time>Initial Setup (One-Time)<a class=anchor href=#initial-setup-one-time>#</a></h3><ul><li><input disabled type=checkbox> Create S3 bucket for DEV: <code>klm-dev</code></li><li><input disabled type=checkbox> Create S3 bucket for STAGING: <code>klm-staging</code></li><li><input disabled type=checkbox> Configure S3 buckets for static website hosting</li><li><input disabled type=checkbox> Add AWS secrets to GitHub repository</li><li><input disabled type=checkbox> Add GitHub variables (DEV_URL, STAGING_URL)</li><li><input disabled type=checkbox> Create <code>staging</code> branch: <code>git checkout -b staging && git push origin staging</code></li><li><input disabled type=checkbox> Test deployment workflows</li></ul><h3 id=daily-workflow>Daily Workflow<a class=anchor href=#daily-workflow>#</a></h3><ul><li><input disabled type=checkbox> Make changes via Claude Code (auto-commits to <code>claude/*</code> branch)</li><li><input disabled type=checkbox> Review auto-deployed changes on DEV environment</li><li><input disabled type=checkbox> Iterate until feature is complete</li><li><input disabled type=checkbox> Create PR to merge into <code>staging</code> branch</li><li><input disabled type=checkbox> Review code and merge PR</li><li><input disabled type=checkbox> Business users review on STAGING environment</li><li><input disabled type=checkbox> When approved, create PR from <code>staging</code> to <code>main</code></li><li><input disabled type=checkbox> Merge to <code>main</code> for production deployment</li></ul><hr><p><strong>Last Updated:</strong> December 29, 2025</p><p><strong>Need Help?</strong></p><ul><li>See: <code>docs/DEPLOYMENT.md</code> for AWS setup details</li><li>See: <code>WORKFLOW.md</code> for git basics</li><li>Check: GitHub Actions logs for deployment issues</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#development-workflow---from-iteration-to-production>Development Workflow - From Iteration to Production</a><ul><li><a href=#overview-three-development-scenarios>Overview: Three Development Scenarios</a><ul><li><a href=#environment-details>Environment Details</a></li><li><a href=#key-changes-from-previous-workflow>Key Changes from Previous Workflow</a></li></ul></li><li><a href=#the-complete-workflow>The Complete Workflow</a><ul><li><a href=#scenario-1-laptopdesktop-development>Scenario 1: Laptop/Desktop Development</a></li><li><a href=#scenario-2-iphone-development-with-auto-preview>Scenario 2: iPhone Development with Auto-Preview</a></li><li><a href=#scenario-3-deploying-to-staging-manual-control>Scenario 3: Deploying to Staging (Manual Control)</a></li><li><a href=#phase-3-business-review-staging-environment>Phase 3: Business Review (STAGING Environment)</a></li><li><a href=#phase-4-production-deployment-prod-environment>Phase 4: Production Deployment (PROD Environment)</a></li></ul></li><li><a href=#quick-reference-when-to-do-what>Quick Reference: When to Do What</a><ul><li><a href=#when-to-commit--push>When to Commit & Push</a></li><li><a href=#when-to-create-a-pr>When to Create a PR</a></li><li><a href=#when-to-merge>When to Merge</a></li><li><a href=#when-to-review-code>When to Review Code</a></li></ul></li><li><a href=#branching-strategy>Branching Strategy</a></li><li><a href=#environment-configuration>Environment Configuration</a><ul><li><a href=#aws-secrets-needed-github-repo-secrets>AWS Secrets Needed (GitHub Repo Secrets)</a></li><li><a href=#current-github-secrets>Current GitHub Secrets</a></li><li><a href=#why-no-stagingproduction-secrets>Why No Staging/Production Secrets?</a></li></ul></li><li><a href=#example-complete-feature-development>Example: Complete Feature Development</a><ul><li><a href=#scenario-add-new-landing-page>Scenario: Add New Landing Page</a></li></ul></li><li><a href=#best-practices>Best Practices</a><ul><li><a href=#for-development-dev>For Development (DEV)</a></li><li><a href=#for-staging>For Staging</a></li><li><a href=#for-production-main>For Production (Main)</a></li><li><a href=#for-code-review>For Code Review</a></li></ul></li><li><a href=#comparison-your-workflow-vs-traditional>Comparison: Your Workflow vs Traditional</a><ul><li><a href=#traditional-workflow-manual>Traditional Workflow (Manual)</a></li><li><a href=#your-workflow-automated>Your Workflow (Automated)</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#i-want-to-see-my-changes-but-theyre-not-on-staging>&ldquo;I want to see my changes but they&rsquo;re not on staging&rdquo;</a></li><li><a href=#business-users-say-staging-is-broken>&ldquo;Business users say staging is broken&rdquo;</a></li><li><a href=#i-made-changes-but-dont-see-them-on-any-environment>&ldquo;I made changes but don&rsquo;t see them on any environment&rdquo;</a></li><li><a href=#how-do-i-undo-a-merge-to-staging>&ldquo;How do I undo a merge to staging?&rdquo;</a></li></ul></li><li><a href=#summary-the-three-questions>Summary: The Three Questions</a><ul><li><a href=#1-should-i-commit-and-push-this-code>1. &ldquo;Should I commit and push this code?&rdquo;</a></li><li><a href=#2-should-i-create-a-pr>2. &ldquo;Should I create a PR?&rdquo;</a></li><li><a href=#3-should-i-merge-this-pr>3. &ldquo;Should I merge this PR?&rdquo;</a></li></ul></li><li><a href=#quick-start-checklist>Quick Start Checklist</a><ul><li><a href=#initial-setup-one-time>Initial Setup (One-Time)</a></li><li><a href=#daily-workflow>Daily Workflow</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>