<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="KLM Insurance - Production Deployment Plan# Date: December 28, 2025 Goal: Deploy Hugo site to production and migrate DNS from current hosting
Current State# Staging (Complete)# ‚úÖ URL: https://www.klmcrm.com ‚úÖ S3 Bucket: klmcrm.com ‚úÖ CloudFront ID: E3HA8770RGET6T ‚úÖ SSL Certificate: *.klmcrm.com (ISSUED) ‚úÖ Route53 Hosted Zone: ZNUGG3NYBSQJ8 ‚úÖ Status: Working perfectly Production (In Progress)# üéØ URL: https://www.klminsurance.com ‚úÖ S3 Bucket: klminsurance.com (exists, website hosting enabled) ‚ùå CloudFront: Not created yet ‚ùå SSL Certificate: None for klminsurance.com ‚ùå Route53 Hosted Zone: None (DNS hosted elsewhere) ‚ùå Current hosting: External provider (needs migration) Deployment Strategy: Phased Approach# Phase 1: Deploy to S3 & Test (30 minutes)# Goal: Get site deployed and testable without affecting DNS
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/documents/klm-migrate/production_deployment_plan/"><meta property="og:site_name" content="My Projects - Documentation Hub"><meta property="og:title" content="PRODUCTION_DEPLOYMENT_PLAN"><meta property="og:description" content="KLM Insurance - Production Deployment Plan# Date: December 28, 2025 Goal: Deploy Hugo site to production and migrate DNS from current hosting
Current State# Staging (Complete)# ‚úÖ URL: https://www.klmcrm.com ‚úÖ S3 Bucket: klmcrm.com ‚úÖ CloudFront ID: E3HA8770RGET6T ‚úÖ SSL Certificate: *.klmcrm.com (ISSUED) ‚úÖ Route53 Hosted Zone: ZNUGG3NYBSQJ8 ‚úÖ Status: Working perfectly Production (In Progress)# üéØ URL: https://www.klminsurance.com ‚úÖ S3 Bucket: klminsurance.com (exists, website hosting enabled) ‚ùå CloudFront: Not created yet ‚ùå SSL Certificate: None for klminsurance.com ‚ùå Route53 Hosted Zone: None (DNS hosted elsewhere) ‚ùå Current hosting: External provider (needs migration) Deployment Strategy: Phased Approach# Phase 1: Deploy to S3 & Test (30 minutes)# Goal: Get site deployed and testable without affecting DNS"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="documents"><meta property="article:published_time" content="2025-12-28T17:44:38+00:00"><meta property="article:modified_time" content="2025-12-28T17:44:38+00:00"><meta itemprop=name content="PRODUCTION_DEPLOYMENT_PLAN"><meta itemprop=description content="KLM Insurance - Production Deployment Plan# Date: December 28, 2025 Goal: Deploy Hugo site to production and migrate DNS from current hosting
Current State# Staging (Complete)# ‚úÖ URL: https://www.klmcrm.com ‚úÖ S3 Bucket: klmcrm.com ‚úÖ CloudFront ID: E3HA8770RGET6T ‚úÖ SSL Certificate: *.klmcrm.com (ISSUED) ‚úÖ Route53 Hosted Zone: ZNUGG3NYBSQJ8 ‚úÖ Status: Working perfectly Production (In Progress)# üéØ URL: https://www.klminsurance.com ‚úÖ S3 Bucket: klminsurance.com (exists, website hosting enabled) ‚ùå CloudFront: Not created yet ‚ùå SSL Certificate: None for klminsurance.com ‚ùå Route53 Hosted Zone: None (DNS hosted elsewhere) ‚ùå Current hosting: External provider (needs migration) Deployment Strategy: Phased Approach# Phase 1: Deploy to S3 & Test (30 minutes)# Goal: Get site deployed and testable without affecting DNS"><meta itemprop=datePublished content="2025-12-28T17:44:38+00:00"><meta itemprop=dateModified content="2025-12-28T17:44:38+00:00"><meta itemprop=wordCount content="1343"><title>PRODUCTION_DEPLOYMENT_PLAN | My Projects - Documentation Hub</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://localhost:1313/documents/klm-migrate/production_deployment_plan/><link rel=stylesheet href=/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj+RQ9XBXU=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.da5a5af27f9bdea67bd6f07f3142824ec301e0c7f9d37c0fc61aefc961834a9e.js integrity="sha256-2lpa8n+b3qZ71vB/MUKCTsMB4Mf503wPxhrvyWGDSp4=" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-documents"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>My Projects - Documentation Hub</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/icons/menu.svg class=book-icon alt=Menu></label><h3>PRODUCTION_DEPLOYMENT_PLAN</h3><label for=toc-control><img src=/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#klm-insurance---production-deployment-plan>KLM Insurance - Production Deployment Plan</a><ul><li><a href=#current-state>Current State</a><ul><li><a href=#staging-complete>Staging (Complete)</a></li><li><a href=#production-in-progress>Production (In Progress)</a></li></ul></li><li><a href=#deployment-strategy-phased-approach>Deployment Strategy: Phased Approach</a><ul><li><a href=#phase-1-deploy-to-s3--test-30-minutes>Phase 1: Deploy to S3 & Test (30 minutes)</a></li><li><a href=#phase-2-setup-cloudfront--ssl-1-hour>Phase 2: Setup CloudFront + SSL (1 hour)</a></li><li><a href=#phase-3-dns-migration-variable-time>Phase 3: DNS Migration (Variable time)</a></li></ul></li><li><a href=#detailed-step-by-step-phase-1-deploy-to-s3>Detailed Step-by-Step: Phase 1 (Deploy to S3)</a><ul><li><a href=#step-1-deploy-without-cloudfront>Step 1: Deploy Without CloudFront</a></li><li><a href=#step-2-test-thoroughly>Step 2: Test Thoroughly</a></li><li><a href=#step-3-get-approval>Step 3: Get Approval</a></li></ul></li><li><a href=#dns-migration-checklist>DNS Migration Checklist</a><ul><li><a href=#before-migration>Before Migration</a></li><li><a href=#during-migration>During Migration</a></li><li><a href=#after-migration>After Migration</a></li></ul></li><li><a href=#important-questions-to-answer-first>Important Questions to Answer First</a><ul><li><a href=#dns--domain>DNS & Domain</a></li><li><a href=#current-hosting>Current Hosting</a></li></ul></li><li><a href=#risk-mitigation>Risk Mitigation</a><ul><li><a href=#low-risk-approach-recommended>Low-Risk Approach (Recommended)</a></li><li><a href=#what-could-go-wrong>What Could Go Wrong?</a></li></ul></li><li><a href=#emergency-rollback-plan>Emergency Rollback Plan</a><ul><li><a href=#if-using-route53-nameservers-changed>If using Route53 (nameservers changed)</a></li><li><a href=#if-only-changed-specific-records>If only changed specific records</a></li></ul></li><li><a href=#timeline-estimates>Timeline Estimates</a><ul><li><a href=#conservative-recommended-for-first-time>Conservative (Recommended for First Time)</a></li><li><a href=#aggressive-if-experienced>Aggressive (If Experienced)</a></li></ul></li><li><a href=#next-steps---what-do-you-want-to-do>Next Steps - What Do You Want to Do?</a><ul><li><a href=#option-1-deploy-to-s3-now-recommended>Option 1: Deploy to S3 Now (Recommended)</a></li><li><a href=#option-2-full-setup-first-cloudfront--ssl>Option 2: Full Setup First (CloudFront + SSL)</a></li><li><a href=#option-3-get-dns-info-first>Option 3: Get DNS Info First</a></li></ul></li><li><a href=#recommended-order>Recommended Order</a></li><li><a href=#questions>Questions?</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=klm-insurance---production-deployment-plan>KLM Insurance - Production Deployment Plan<a class=anchor href=#klm-insurance---production-deployment-plan>#</a></h1><p><strong>Date:</strong> December 28, 2025
<strong>Goal:</strong> Deploy Hugo site to production and migrate DNS from current hosting</p><hr><h2 id=current-state>Current State<a class=anchor href=#current-state>#</a></h2><h3 id=staging-complete>Staging (Complete)<a class=anchor href=#staging-complete>#</a></h3><ul><li>‚úÖ URL: <a href=https://www.klmcrm.com>https://www.klmcrm.com</a></li><li>‚úÖ S3 Bucket: klmcrm.com</li><li>‚úÖ CloudFront ID: E3HA8770RGET6T</li><li>‚úÖ SSL Certificate: *.klmcrm.com (ISSUED)</li><li>‚úÖ Route53 Hosted Zone: ZNUGG3NYBSQJ8</li><li>‚úÖ Status: Working perfectly</li></ul><h3 id=production-in-progress>Production (In Progress)<a class=anchor href=#production-in-progress>#</a></h3><ul><li>üéØ URL: <a href=https://www.klminsurance.com>https://www.klminsurance.com</a></li><li>‚úÖ S3 Bucket: klminsurance.com (exists, website hosting enabled)</li><li>‚ùå CloudFront: Not created yet</li><li>‚ùå SSL Certificate: None for klminsurance.com</li><li>‚ùå Route53 Hosted Zone: None (DNS hosted elsewhere)</li><li>‚ùå Current hosting: External provider (needs migration)</li></ul><hr><h2 id=deployment-strategy-phased-approach>Deployment Strategy: Phased Approach<a class=anchor href=#deployment-strategy-phased-approach>#</a></h2><h3 id=phase-1-deploy-to-s3--test-30-minutes>Phase 1: Deploy to S3 & Test (30 minutes)<a class=anchor href=#phase-1-deploy-to-s3--test-30-minutes>#</a></h3><p><strong>Goal:</strong> Get site deployed and testable without affecting DNS</p><p><strong>Steps:</strong></p><ol><li>Deploy site to S3 bucket (without CloudFront)</li><li>Test via S3 website URL</li><li>Verify all pages, forms, and links work</li><li>Get stakeholder approval</li></ol><p><strong>Testing URL:</strong> <a href=http://klminsurance.com.s3-website-us-east-1.amazonaws.com>http://klminsurance.com.s3-website-us-east-1.amazonaws.com</a></p><p><strong>Advantages:</strong></p><ul><li>‚úÖ Safe - doesn&rsquo;t affect current live site</li><li>‚úÖ Fast - no waiting for CloudFront/DNS propagation</li><li>‚úÖ Reversible - easy to rollback</li><li>‚úÖ Can test thoroughly before DNS change</li></ul><hr><h3 id=phase-2-setup-cloudfront--ssl-1-hour>Phase 2: Setup CloudFront + SSL (1 hour)<a class=anchor href=#phase-2-setup-cloudfront--ssl-1-hour>#</a></h3><p><strong>Goal:</strong> Prepare CDN and HTTPS</p><p><strong>Steps:</strong></p><h4 id=2a-request-ssl-certificate>2a. Request SSL Certificate<a class=anchor href=#2a-request-ssl-certificate>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws acm request-certificate <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --domain-name klminsurance.com <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --subject-alternative-names www.klminsurance.com <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --validation-method DNS <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --region us-east-1</span></span></code></pre></div><p><strong>Important:</strong> You&rsquo;ll need to add DNS validation records. If klminsurance.com DNS is with your current provider, you&rsquo;ll add records there temporarily.</p><h4 id=2b-create-cloudfront-distribution>2b. Create CloudFront Distribution<a class=anchor href=#2b-create-cloudfront-distribution>#</a></h4><p>Once SSL cert is validated:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create distribution with proper config</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Including:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - Origin: S3 bucket (website endpoint)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - Aliases: klminsurance.com, www.klminsurance.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - SSL Certificate: ACM cert from step 2a</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - HTTPS redirect</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - Custom error pages (404 ‚Üí index.html for SPA routing)</span></span></span></code></pre></div><h4 id=2c-update-production-script>2c. Update Production Script<a class=anchor href=#2c-update-production-script>#</a></h4><p>Update <code>publish_to_production.py</code> line 21 with new CloudFront ID:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>PRODUCTION_CLOUDFRONT_ID <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;E_YOUR_NEW_CF_ID_HERE&#34;</span></span></span></code></pre></div><p><strong>Time:</strong> SSL validation can take 5-30 minutes. CloudFront creation takes 15-20 minutes.</p><hr><h3 id=phase-3-dns-migration-variable-time>Phase 3: DNS Migration (Variable time)<a class=anchor href=#phase-3-dns-migration-variable-time>#</a></h3><p><strong>Goal:</strong> Point klminsurance.com to AWS</p><p>This is the critical step where you switch from old hosting to new.</p><h4 id=option-a-gradual-migration-recommended>Option A: Gradual Migration (RECOMMENDED)<a class=anchor href=#option-a-gradual-migration-recommended>#</a></h4><p><strong>Day 1: Prepare</strong></p><ol><li>Lower TTL on current DNS records to 300 seconds (5 minutes)</li><li>Wait 24-48 hours for old TTL to expire</li><li>Document all current DNS records</li></ol><p><strong>Day 2: Create Route53 Zone</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create hosted zone</span>
</span></span><span style=display:flex><span>aws route53 create-hosted-zone --name klminsurance.com --caller-reference <span style=color:#66d9ef>$(</span>date +%s<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Note the nameservers - you&#39;ll need these</span></span></span></code></pre></div><p><strong>Day 3: Setup Records in Route53</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># A record for klminsurance.com ‚Üí CloudFront</span>
</span></span><span style=display:flex><span><span style=color:#75715e># CNAME for www.klminsurance.com ‚Üí CloudFront</span>
</span></span><span style=display:flex><span><span style=color:#75715e># MX records (if you have email)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># TXT records (SPF, DKIM, etc.)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Any other records from current DNS</span></span></span></code></pre></div><p><strong>Day 4: Switch Nameservers at Domain Registrar</strong></p><ol><li>Log into domain registrar (GoDaddy, Namecheap, etc.)</li><li>Update nameservers to Route53 nameservers</li><li>Monitor propagation (use <code>dig klminsurance.com</code>)</li></ol><p><strong>Day 5: Monitor</strong></p><ul><li>Watch for DNS propagation (can take 24-48 hours)</li><li>Test from multiple locations</li><li>Monitor CloudFront metrics</li></ul><h4 id=option-b-quick-migration-risky>Option B: Quick Migration (RISKY)<a class=anchor href=#option-b-quick-migration-risky>#</a></h4><p>Switch nameservers immediately. Downtime possible if records aren&rsquo;t set up correctly.</p><p><strong>NOT RECOMMENDED</strong> unless you&rsquo;re confident in DNS setup.</p><hr><h2 id=detailed-step-by-step-phase-1-deploy-to-s3>Detailed Step-by-Step: Phase 1 (Deploy to S3)<a class=anchor href=#detailed-step-by-step-phase-1-deploy-to-s3>#</a></h2><h3 id=step-1-deploy-without-cloudfront>Step 1: Deploy Without CloudFront<a class=anchor href=#step-1-deploy-without-cloudfront>#</a></h3><p>Since the script requires CloudFront ID, let&rsquo;s deploy directly first:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># In klm-hugo-site directory</span>
</span></span><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Build for production</span>
</span></span><span style=display:flex><span>hugo --baseURL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://klminsurance.com.s3-website-us-east-1.amazonaws.com&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>     --environment production <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>     --destination public <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>     --cleanDestinationDir
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Deploy to S3</span>
</span></span><span style=display:flex><span>aws s3 sync public/ s3://klminsurance.com --delete
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Test the site</span>
</span></span><span style=display:flex><span>curl -I http://klminsurance.com.s3-website-us-east-1.amazonaws.com</span></span></code></pre></div><h3 id=step-2-test-thoroughly>Step 2: Test Thoroughly<a class=anchor href=#step-2-test-thoroughly>#</a></h3><p>Visit: <a href=http://klminsurance.com.s3-website-us-east-1.amazonaws.com>http://klminsurance.com.s3-website-us-east-1.amazonaws.com</a></p><p><strong>Test checklist:</strong></p><ul><li><input disabled type=checkbox> Homepage loads</li><li><input disabled type=checkbox> All menu items work</li><li><input disabled type=checkbox> Insurance Services dropdown works</li><li><input disabled type=checkbox> Customer Service dropdown works</li><li><input disabled type=checkbox> All insurance product pages load</li><li><input disabled type=checkbox> Contact form displays (JotForm embed)</li><li><input disabled type=checkbox> Compare quotes form displays</li><li><input disabled type=checkbox> Client center page works</li><li><input disabled type=checkbox> Images load correctly</li><li><input disabled type=checkbox> CSS styling is correct</li><li><input disabled type=checkbox> Mobile menu works</li><li><input disabled type=checkbox> All links are correct</li></ul><h3 id=step-3-get-approval>Step 3: Get Approval<a class=anchor href=#step-3-get-approval>#</a></h3><p>Share S3 URL with stakeholders for approval before proceeding to CloudFront/DNS.</p><hr><h2 id=dns-migration-checklist>DNS Migration Checklist<a class=anchor href=#dns-migration-checklist>#</a></h2><h3 id=before-migration>Before Migration<a class=anchor href=#before-migration>#</a></h3><ul><li><p><input disabled type=checkbox> <strong>Document current DNS records</strong></p><ul><li>A records</li><li>CNAME records</li><li>MX records (email!)</li><li>TXT records (SPF, DKIM, verification)</li><li>Any subdomains</li></ul></li><li><p><input disabled type=checkbox> <strong>Lower TTL to 300 seconds</strong></p><ul><li>Wait 24-48 hours after lowering</li></ul></li><li><p><input disabled type=checkbox> <strong>Backup current DNS config</strong></p><ul><li>Take screenshots</li><li>Export if possible</li></ul></li><li><p><input disabled type=checkbox> <strong>Verify email setup</strong></p><ul><li>Will MX records work after migration?</li><li>Do you use email with klminsurance.com?</li></ul></li></ul><h3 id=during-migration>During Migration<a class=anchor href=#during-migration>#</a></h3><ul><li><p><input disabled type=checkbox> <strong>Create Route53 hosted zone</strong></p></li><li><p><input disabled type=checkbox> <strong>Copy ALL DNS records to Route53</strong></p></li><li><p><input disabled type=checkbox> <strong>Add CloudFront records</strong></p><ul><li>A record: klminsurance.com ‚Üí CloudFront (Alias)</li><li>CNAME: <a href=https://www.klminsurance.com>www.klminsurance.com</a> ‚Üí CloudFront</li></ul></li><li><p><input disabled type=checkbox> <strong>Test Route53 records</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Query Route53 nameservers directly</span>
</span></span><span style=display:flex><span>dig @ns-xxxx.awsdns-xx.com klminsurance.com</span></span></code></pre></div></li><li><p><input disabled type=checkbox> <strong>Update nameservers at registrar</strong></p></li><li><p><input disabled type=checkbox> <strong>Monitor propagation</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check propagation</span>
</span></span><span style=display:flex><span>dig klminsurance.com
</span></span><span style=display:flex><span>dig www.klminsurance.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check from multiple DNS servers</span>
</span></span><span style=display:flex><span>dig @8.8.8.8 klminsurance.com
</span></span><span style=display:flex><span>dig @1.1.1.1 klminsurance.com</span></span></code></pre></div></li></ul><h3 id=after-migration>After Migration<a class=anchor href=#after-migration>#</a></h3><ul><li><p><input disabled type=checkbox> <strong>Verify site is live</strong></p><ul><li><a href=https://www.klminsurance.com>https://www.klminsurance.com</a></li><li><a href=https://klminsurance.com>https://klminsurance.com</a></li></ul></li><li><p><input disabled type=checkbox> <strong>Test email</strong> (if applicable)</p></li><li><p><input disabled type=checkbox> <strong>Monitor CloudFront metrics</strong></p></li><li><p><input disabled type=checkbox> <strong>Check for broken links</strong></p></li><li><p><input disabled type=checkbox> <strong>Test forms submission</strong></p></li><li><p><input disabled type=checkbox> <strong>Raise TTL back to normal</strong> (3600 or 86400)</p></li></ul><hr><h2 id=important-questions-to-answer-first>Important Questions to Answer First<a class=anchor href=#important-questions-to-answer-first>#</a></h2><h3 id=dns--domain>DNS & Domain<a class=anchor href=#dns--domain>#</a></h3><ol><li><p><strong>Where is klminsurance.com registered?</strong></p><ul><li>GoDaddy? Namecheap? Network Solutions?</li><li>You&rsquo;ll need login credentials</li></ul></li><li><p><strong>What DNS records currently exist?</strong></p><ul><li>Run: <code>dig klminsurance.com ANY</code> from current setup</li><li>Document all records</li></ul></li><li><p><strong>Do you use email with @klminsurance.com?</strong></p><ul><li>If yes, you MUST preserve MX records</li><li>Test email after migration</li></ul></li><li><p><strong>Any subdomains in use?</strong></p><ul><li>mail.klminsurance.com?</li><li>ftp.klminsurance.com?</li><li>All must be migrated</li></ul></li></ol><h3 id=current-hosting>Current Hosting<a class=anchor href=#current-hosting>#</a></h3><ol><li><p><strong>What&rsquo;s your current hosting provider?</strong></p><ul><li>When does the contract end?</li><li>Will you keep it temporarily?</li></ul></li><li><p><strong>Is there a rollback plan?</strong></p><ul><li>Can you switch DNS back if needed?</li></ul></li><li><p><strong>When is the best time to migrate?</strong></p><ul><li>Low traffic period?</li><li>Weekend vs weekday?</li></ul></li></ol><hr><h2 id=risk-mitigation>Risk Mitigation<a class=anchor href=#risk-mitigation>#</a></h2><h3 id=low-risk-approach-recommended>Low-Risk Approach (Recommended)<a class=anchor href=#low-risk-approach-recommended>#</a></h3><ol><li>‚úÖ Deploy to S3 first, test via S3 URL</li><li>‚úÖ Create CloudFront, wait for deployment</li><li>‚úÖ Test via CloudFront URL (before DNS change)</li><li>‚úÖ Lower DNS TTL, wait 48 hours</li><li>‚úÖ Migrate DNS records to Route53</li><li>‚úÖ Test Route53 directly before nameserver change</li><li>‚úÖ Switch nameservers</li><li>‚úÖ Monitor for 24-48 hours</li><li>‚úÖ Only then cancel old hosting</li></ol><h3 id=what-could-go-wrong>What Could Go Wrong?<a class=anchor href=#what-could-go-wrong>#</a></h3><p><strong>DNS Issues:</strong></p><ul><li>Missing MX records ‚Üí Email breaks</li><li>Missing subdomains ‚Üí Subdomains offline</li><li>Typo in records ‚Üí Site unreachable</li><li><strong>Mitigation:</strong> Document everything, test before switching</li></ul><p><strong>CloudFront Issues:</strong></p><ul><li>SSL cert not validated ‚Üí HTTPS doesn&rsquo;t work</li><li>Wrong origin config ‚Üí 502/503 errors</li><li>Cache issues ‚Üí Old content showing</li><li><strong>Mitigation:</strong> Test with CloudFront URL before DNS change</li></ul><p><strong>S3 Issues:</strong></p><ul><li>Bucket permissions wrong ‚Üí 403 errors</li><li>Missing files ‚Üí 404 errors</li><li>Wrong base URL ‚Üí Broken links</li><li><strong>Mitigation:</strong> Test via S3 URL in Phase 1</li></ul><hr><h2 id=emergency-rollback-plan>Emergency Rollback Plan<a class=anchor href=#emergency-rollback-plan>#</a></h2><p>If something goes wrong:</p><h3 id=if-using-route53-nameservers-changed>If using Route53 (nameservers changed)<a class=anchor href=#if-using-route53-nameservers-changed>#</a></h3><ol><li><p><strong>Quick fix: Update Route53 records</strong></p><ul><li>Point A record back to old hosting IP</li><li>Usually takes 5-60 minutes</li></ul></li><li><p><strong>Full rollback: Change nameservers back</strong></p><ul><li>Log into registrar</li><li>Switch nameservers back to old DNS</li><li>Takes 1-48 hours to propagate</li></ul></li></ol><h3 id=if-only-changed-specific-records>If only changed specific records<a class=anchor href=#if-only-changed-specific-records>#</a></h3><ul><li>Update records back to old values</li><li>Takes TTL time to propagate (5 min if you lowered it)</li></ul><hr><h2 id=timeline-estimates>Timeline Estimates<a class=anchor href=#timeline-estimates>#</a></h2><h3 id=conservative-recommended-for-first-time>Conservative (Recommended for First Time)<a class=anchor href=#conservative-recommended-for-first-time>#</a></h3><ul><li>Phase 1 (S3 Deploy & Test): 2-4 hours</li><li>Phase 2 (CloudFront + SSL): 1-2 days<ul><li>Waiting for SSL validation: 5-30 minutes</li><li>Waiting for CloudFront deployment: 15-20 minutes</li><li>Testing and verification: 2-4 hours</li></ul></li><li>Phase 3 (DNS Migration): 3-7 days<ul><li>Lower TTL + wait: 2-3 days</li><li>Route53 setup + test: 1 day</li><li>Nameserver change + propagation: 1-3 days</li></ul></li></ul><p><strong>Total: 1-2 weeks for safe migration</strong></p><h3 id=aggressive-if-experienced>Aggressive (If Experienced)<a class=anchor href=#aggressive-if-experienced>#</a></h3><ul><li>Phase 1: 1 hour</li><li>Phase 2: 4 hours</li><li>Phase 3: 1-2 days</li></ul><p><strong>Total: 2-3 days</strong></p><hr><h2 id=next-steps---what-do-you-want-to-do>Next Steps - What Do You Want to Do?<a class=anchor href=#next-steps---what-do-you-want-to-do>#</a></h2><h3 id=option-1-deploy-to-s3-now-recommended>Option 1: Deploy to S3 Now (Recommended)<a class=anchor href=#option-1-deploy-to-s3-now-recommended>#</a></h3><ul><li>Safe, fast, testable</li><li>Doesn&rsquo;t affect current site</li><li>Can show stakeholders before DNS change</li></ul><p><strong>Command:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site
</span></span><span style=display:flex><span>hugo --baseURL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://klminsurance.com.s3-website-us-east-1.amazonaws.com&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>     --environment production <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>     --destination public <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>     --cleanDestinationDir
</span></span><span style=display:flex><span>aws s3 sync public/ s3://klminsurance.com --delete</span></span></code></pre></div><h3 id=option-2-full-setup-first-cloudfront--ssl>Option 2: Full Setup First (CloudFront + SSL)<a class=anchor href=#option-2-full-setup-first-cloudfront--ssl>#</a></h3><ul><li>Takes longer</li><li>More complete</li><li>Still need DNS migration later</li></ul><h3 id=option-3-get-dns-info-first>Option 3: Get DNS Info First<a class=anchor href=#option-3-get-dns-info-first>#</a></h3><ul><li>Document current DNS setup</li><li>Plan migration timing</li><li>Then deploy</li></ul><hr><h2 id=recommended-order>Recommended Order<a class=anchor href=#recommended-order>#</a></h2><ol><li><strong>TODAY:</strong> Deploy to S3, test, get approval</li><li><strong>NEXT:</strong> Setup CloudFront + SSL</li><li><strong>THEN:</strong> Plan DNS migration carefully</li><li><strong>FINALLY:</strong> Execute DNS migration during low-traffic period</li></ol><hr><h2 id=questions>Questions?<a class=anchor href=#questions>#</a></h2><p>Before proceeding, we should discuss:</p><ol><li>Do you have access to your domain registrar?</li><li>Do you use email with @klminsurance.com?</li><li>What&rsquo;s your risk tolerance (fast vs safe)?</li><li>When is the best time for DNS migration?</li><li>Is there a rollback window if needed?</li></ol><hr><p><strong>Status:</strong> Ready for Phase 1 (S3 Deployment)
<strong>Risk Level:</strong> Low (no DNS changes yet)
<strong>Reversible:</strong> Yes (just delete S3 files)</p><p>Let me know when you&rsquo;re ready to proceed!</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#klm-insurance---production-deployment-plan>KLM Insurance - Production Deployment Plan</a><ul><li><a href=#current-state>Current State</a><ul><li><a href=#staging-complete>Staging (Complete)</a></li><li><a href=#production-in-progress>Production (In Progress)</a></li></ul></li><li><a href=#deployment-strategy-phased-approach>Deployment Strategy: Phased Approach</a><ul><li><a href=#phase-1-deploy-to-s3--test-30-minutes>Phase 1: Deploy to S3 & Test (30 minutes)</a></li><li><a href=#phase-2-setup-cloudfront--ssl-1-hour>Phase 2: Setup CloudFront + SSL (1 hour)</a></li><li><a href=#phase-3-dns-migration-variable-time>Phase 3: DNS Migration (Variable time)</a></li></ul></li><li><a href=#detailed-step-by-step-phase-1-deploy-to-s3>Detailed Step-by-Step: Phase 1 (Deploy to S3)</a><ul><li><a href=#step-1-deploy-without-cloudfront>Step 1: Deploy Without CloudFront</a></li><li><a href=#step-2-test-thoroughly>Step 2: Test Thoroughly</a></li><li><a href=#step-3-get-approval>Step 3: Get Approval</a></li></ul></li><li><a href=#dns-migration-checklist>DNS Migration Checklist</a><ul><li><a href=#before-migration>Before Migration</a></li><li><a href=#during-migration>During Migration</a></li><li><a href=#after-migration>After Migration</a></li></ul></li><li><a href=#important-questions-to-answer-first>Important Questions to Answer First</a><ul><li><a href=#dns--domain>DNS & Domain</a></li><li><a href=#current-hosting>Current Hosting</a></li></ul></li><li><a href=#risk-mitigation>Risk Mitigation</a><ul><li><a href=#low-risk-approach-recommended>Low-Risk Approach (Recommended)</a></li><li><a href=#what-could-go-wrong>What Could Go Wrong?</a></li></ul></li><li><a href=#emergency-rollback-plan>Emergency Rollback Plan</a><ul><li><a href=#if-using-route53-nameservers-changed>If using Route53 (nameservers changed)</a></li><li><a href=#if-only-changed-specific-records>If only changed specific records</a></li></ul></li><li><a href=#timeline-estimates>Timeline Estimates</a><ul><li><a href=#conservative-recommended-for-first-time>Conservative (Recommended for First Time)</a></li><li><a href=#aggressive-if-experienced>Aggressive (If Experienced)</a></li></ul></li><li><a href=#next-steps---what-do-you-want-to-do>Next Steps - What Do You Want to Do?</a><ul><li><a href=#option-1-deploy-to-s3-now-recommended>Option 1: Deploy to S3 Now (Recommended)</a></li><li><a href=#option-2-full-setup-first-cloudfront--ssl>Option 2: Full Setup First (CloudFront + SSL)</a></li><li><a href=#option-3-get-dns-info-first>Option 3: Get DNS Info First</a></li></ul></li><li><a href=#recommended-order>Recommended Order</a></li><li><a href=#questions>Questions?</a></li></ul></li></ul></nav></div></aside></main></body></html>