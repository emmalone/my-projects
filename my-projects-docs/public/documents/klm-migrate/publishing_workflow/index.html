<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="KLM Insurance Website - Complete Publishing Workflow# Complete Lifecycle Documentation: Development ‚Üí Staging ‚Üí Production
Table of Contents# Overview Environment Architecture Prerequisites Development Workflow Creating a New Page Local Testing (Localhost) Publishing to Staging Publishing to Production Troubleshooting Quick Reference Overview# The KLM Insurance website follows a three-tier publishing workflow:
Development (Localhost) ‚Üí Staging (klmcrm.com) ‚Üí Production (klminsurance.com)Key Principles:
All changes are developed and tested locally first Staging is used for validation and client review Production deployments happen only after staging approval Each environment is isolated and independent Environment Architecture# Environment URL S3 Bucket CloudFront ID Purpose Development http://localhost:1313 N/A N/A Local development and testing Staging https://www.klmcrm.com
https://klmcrm.com s3://klmcrm.com E3HA8770RGET6T Client review and validation Production https://www.klminsurance.com
https://klminsurance.com s3://klminsurance.com To be configured Live customer-facing site AWS Account: 837716495292 Region: us-east-1 IAM User: klm-hugo
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/documents/klm-migrate/publishing_workflow/"><meta property="og:site_name" content="My Projects - Documentation Hub"><meta property="og:title" content="PUBLISHING_WORKFLOW"><meta property="og:description" content="KLM Insurance Website - Complete Publishing Workflow# Complete Lifecycle Documentation: Development ‚Üí Staging ‚Üí Production
Table of Contents# Overview Environment Architecture Prerequisites Development Workflow Creating a New Page Local Testing (Localhost) Publishing to Staging Publishing to Production Troubleshooting Quick Reference Overview# The KLM Insurance website follows a three-tier publishing workflow:
Development (Localhost) ‚Üí Staging (klmcrm.com) ‚Üí Production (klminsurance.com)Key Principles:
All changes are developed and tested locally first Staging is used for validation and client review Production deployments happen only after staging approval Each environment is isolated and independent Environment Architecture# Environment URL S3 Bucket CloudFront ID Purpose Development http://localhost:1313 N/A N/A Local development and testing Staging https://www.klmcrm.com
https://klmcrm.com s3://klmcrm.com E3HA8770RGET6T Client review and validation Production https://www.klminsurance.com
https://klminsurance.com s3://klminsurance.com To be configured Live customer-facing site AWS Account: 837716495292 Region: us-east-1 IAM User: klm-hugo"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="documents"><meta property="article:published_time" content="2025-12-23T12:46:16+00:00"><meta property="article:modified_time" content="2025-12-23T12:46:16+00:00"><meta itemprop=name content="PUBLISHING_WORKFLOW"><meta itemprop=description content="KLM Insurance Website - Complete Publishing Workflow# Complete Lifecycle Documentation: Development ‚Üí Staging ‚Üí Production
Table of Contents# Overview Environment Architecture Prerequisites Development Workflow Creating a New Page Local Testing (Localhost) Publishing to Staging Publishing to Production Troubleshooting Quick Reference Overview# The KLM Insurance website follows a three-tier publishing workflow:
Development (Localhost) ‚Üí Staging (klmcrm.com) ‚Üí Production (klminsurance.com)Key Principles:
All changes are developed and tested locally first Staging is used for validation and client review Production deployments happen only after staging approval Each environment is isolated and independent Environment Architecture# Environment URL S3 Bucket CloudFront ID Purpose Development http://localhost:1313 N/A N/A Local development and testing Staging https://www.klmcrm.com
https://klmcrm.com s3://klmcrm.com E3HA8770RGET6T Client review and validation Production https://www.klminsurance.com
https://klminsurance.com s3://klminsurance.com To be configured Live customer-facing site AWS Account: 837716495292 Region: us-east-1 IAM User: klm-hugo"><meta itemprop=datePublished content="2025-12-23T12:46:16+00:00"><meta itemprop=dateModified content="2025-12-23T12:46:16+00:00"><meta itemprop=wordCount content="1816"><title>PUBLISHING_WORKFLOW | My Projects - Documentation Hub</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://localhost:1313/documents/klm-migrate/publishing_workflow/><link rel=stylesheet href=/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj+RQ9XBXU=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.da5a5af27f9bdea67bd6f07f3142824ec301e0c7f9d37c0fc61aefc961834a9e.js integrity="sha256-2lpa8n+b3qZ71vB/MUKCTsMB4Mf503wPxhrvyWGDSp4=" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-documents"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>My Projects - Documentation Hub</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/icons/menu.svg class=book-icon alt=Menu></label><h3>PUBLISHING_WORKFLOW</h3><label for=toc-control><img src=/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#klm-insurance-website---complete-publishing-workflow>KLM Insurance Website - Complete Publishing Workflow</a><ul><li><a href=#table-of-contents>Table of Contents</a></li><li><a href=#overview>Overview</a></li><li><a href=#environment-architecture>Environment Architecture</a></li><li><a href=#prerequisites>Prerequisites</a><ul><li><a href=#required-software>Required Software</a></li><li><a href=#aws-configuration>AWS Configuration</a></li></ul></li><li><a href=#development-workflow>Development Workflow</a><ul><li><a href=#daily-development-process>Daily Development Process</a></li></ul></li><li><a href=#creating-a-new-page>Creating a New Page</a><ul><li><a href=#step-1-create-content-file>Step 1: Create Content File</a></li><li><a href=#step-2-choose-form-type>Step 2: Choose Form Type</a></li><li><a href=#step-3-add-to-navigation-optional>Step 3: Add to Navigation (Optional)</a></li><li><a href=#step-4-add-images-if-needed>Step 4: Add Images (if needed)</a></li></ul></li><li><a href=#local-testing-localhost>Local Testing (Localhost)</a><ul><li><a href=#start-the-hugo-development-server>Start the Hugo Development Server</a></li><li><a href=#testing-checklist>Testing Checklist</a></li><li><a href=#uiux-testing-optional>UI/UX Testing (Optional)</a></li></ul></li><li><a href=#publishing-to-staging>Publishing to Staging</a><ul><li><a href=#when-to-publish-to-staging>When to Publish to Staging</a></li><li><a href=#run-the-staging-deployment-script>Run the Staging Deployment Script</a></li><li><a href=#what-the-script-does>What the Script Does</a></li><li><a href=#expected-output>Expected Output</a></li><li><a href=#post-deployment-verification>Post-Deployment Verification</a></li></ul></li><li><a href=#publishing-to-production>Publishing to Production</a><ul><li><a href=#-important-production-deployment-checklist>‚ö†Ô∏è IMPORTANT: Production Deployment Checklist</a></li><li><a href=#run-the-production-deployment-script>Run the Production Deployment Script</a></li><li><a href=#safety-confirmation>Safety Confirmation</a></li><li><a href=#what-the-script-does-1>What the Script Does</a></li><li><a href=#post-production-deployment>Post-Production Deployment</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#hugo-build-errors>Hugo Build Errors</a></li><li><a href=#aws-deployment-errors>AWS Deployment Errors</a></li><li><a href=#site-not-updating>Site Not Updating</a></li><li><a href=#hugo-server-issues>Hugo Server Issues</a></li></ul></li><li><a href=#quick-reference>Quick Reference</a><ul><li><a href=#common-commands>Common Commands</a></li><li><a href=#file-locations>File Locations</a></li><li><a href=#environment-urls>Environment URLs</a></li><li><a href=#front-matter-templates>Front Matter Templates</a></li></ul></li><li><a href=#complete-lifecycle-example>Complete Lifecycle Example</a><ul><li><a href=#scenario-adding-a-motorcycle-insurance-page>Scenario: Adding a &ldquo;Motorcycle Insurance&rdquo; Page</a></li></ul></li><li><a href=#best-practices>Best Practices</a><ul><li><a href=#development>Development</a></li><li><a href=#staging>Staging</a></li><li><a href=#production>Production</a></li><li><a href=#general>General</a></li></ul></li><li><a href=#support--resources>Support & Resources</a><ul><li><a href=#documentation>Documentation</a></li><li><a href=#project-files>Project Files</a></li><li><a href=#getting-help>Getting Help</a></li></ul></li><li><a href=#maintenance>Maintenance</a><ul><li><a href=#regular-tasks>Regular Tasks</a></li></ul></li><li><a href=#appendix-script-details>Appendix: Script Details</a><ul><li><a href=#publish_to_stagingpy>publish_to_staging.py</a></li><li><a href=#publish_to_productionpy>publish_to_production.py</a></li><li><a href=#test_ui_uxpy>test_ui_ux.py</a></li></ul></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=klm-insurance-website---complete-publishing-workflow>KLM Insurance Website - Complete Publishing Workflow<a class=anchor href=#klm-insurance-website---complete-publishing-workflow>#</a></h1><p><strong>Complete Lifecycle Documentation: Development ‚Üí Staging ‚Üí Production</strong></p><hr><h2 id=table-of-contents>Table of Contents<a class=anchor href=#table-of-contents>#</a></h2><ol><li><a href=#overview>Overview</a></li><li><a href=#environment-architecture>Environment Architecture</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#development-workflow>Development Workflow</a></li><li><a href=#creating-a-new-page>Creating a New Page</a></li><li><a href=#local-testing-localhost>Local Testing (Localhost)</a></li><li><a href=#publishing-to-staging>Publishing to Staging</a></li><li><a href=#publishing-to-production>Publishing to Production</a></li><li><a href=#troubleshooting>Troubleshooting</a></li><li><a href=#quick-reference>Quick Reference</a></li></ol><hr><h2 id=overview>Overview<a class=anchor href=#overview>#</a></h2><p>The KLM Insurance website follows a three-tier publishing workflow:</p><pre tabindex=0><code>Development (Localhost) ‚Üí Staging (klmcrm.com) ‚Üí Production (klminsurance.com)</code></pre><p><strong>Key Principles:</strong></p><ul><li>All changes are developed and tested locally first</li><li>Staging is used for validation and client review</li><li>Production deployments happen only after staging approval</li><li>Each environment is isolated and independent</li></ul><hr><h2 id=environment-architecture>Environment Architecture<a class=anchor href=#environment-architecture>#</a></h2><table><thead><tr><th>Environment</th><th>URL</th><th>S3 Bucket</th><th>CloudFront ID</th><th>Purpose</th></tr></thead><tbody><tr><td><strong>Development</strong></td><td>http://localhost:1313</td><td>N/A</td><td>N/A</td><td>Local development and testing</td></tr><tr><td><strong>Staging</strong></td><td><a href=https://www.klmcrm.com>https://www.klmcrm.com</a><br><a href=https://klmcrm.com>https://klmcrm.com</a></td><td>s3://klmcrm.com</td><td>E3HA8770RGET6T</td><td>Client review and validation</td></tr><tr><td><strong>Production</strong></td><td><a href=https://www.klminsurance.com>https://www.klminsurance.com</a><br><a href=https://klminsurance.com>https://klminsurance.com</a></td><td>s3://klminsurance.com</td><td><em>To be configured</em></td><td>Live customer-facing site</td></tr></tbody></table><p><strong>AWS Account:</strong> 837716495292
<strong>Region:</strong> us-east-1
<strong>IAM User:</strong> klm-hugo</p><hr><h2 id=prerequisites>Prerequisites<a class=anchor href=#prerequisites>#</a></h2><h3 id=required-software>Required Software<a class=anchor href=#required-software>#</a></h3><p>Verify all tools are installed:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check Hugo</span>
</span></span><span style=display:flex><span>hugo version
</span></span><span style=display:flex><span><span style=color:#75715e># Required: v0.153.1+extended or newer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check AWS CLI</span>
</span></span><span style=display:flex><span>aws --version
</span></span><span style=display:flex><span><span style=color:#75715e># Required: aws-cli/2.x.x or newer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check Python</span>
</span></span><span style=display:flex><span>python3 --version
</span></span><span style=display:flex><span><span style=color:#75715e># Required: Python 3.9+</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check Git</span>
</span></span><span style=display:flex><span>git --version</span></span></code></pre></div><h3 id=aws-configuration>AWS Configuration<a class=anchor href=#aws-configuration>#</a></h3><p>Verify AWS CLI is configured:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws sts get-caller-identity</span></span></code></pre></div><p>Expected output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;UserId&#34;</span>: <span style=color:#e6db74>&#34;AIDA4GC6LJO6C5CPI73CD&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Account&#34;</span>: <span style=color:#e6db74>&#34;837716495292&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;Arn&#34;</span>: <span style=color:#e6db74>&#34;arn:aws:iam::837716495292:user/klm-hugo&#34;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>If not configured, run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws configure</span></span></code></pre></div><p>And provide your credentials.</p><hr><h2 id=development-workflow>Development Workflow<a class=anchor href=#development-workflow>#</a></h2><h3 id=daily-development-process>Daily Development Process<a class=anchor href=#daily-development-process>#</a></h3><ol><li><p><strong>Start Local Server</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site
</span></span><span style=display:flex><span>hugo server -D --bind 0.0.0.0</span></span></code></pre></div></li><li><p><strong>Make Changes</strong></p><ul><li>Edit files in real-time</li><li>Changes auto-reload in browser</li><li>View at http://localhost:1313</li></ul></li><li><p><strong>Test Changes</strong></p><ul><li>Check all pages work</li><li>Test on multiple viewports (mobile, tablet, desktop)</li><li>Verify forms and navigation</li></ul></li><li><p><strong>Stop Server</strong></p><ul><li>Press <code>Ctrl+C</code> in terminal</li></ul></li></ol><hr><h2 id=creating-a-new-page>Creating a New Page<a class=anchor href=#creating-a-new-page>#</a></h2><h3 id=step-1-create-content-file>Step 1: Create Content File<a class=anchor href=#step-1-create-content-file>#</a></h3><p>Navigate to the content directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site/content</span></span></code></pre></div><p>Create a new Markdown file (e.g., <code>renters-insurance.md</code>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>---
</span></span><span style=display:flex><span>title: &#34;Renters Insurance&#34;
</span></span><span style=display:flex><span>description: &#34;Renters Insurance - KLM Insurance Solutions&#34;
</span></span><span style=display:flex><span>draft: false
</span></span><span style=display:flex><span>hero_image: &#34;/images/featured-banner.png&#34;
</span></span><span style=display:flex><span>sidebar_image: &#34;/images/content-banner.png&#34;
</span></span><span style=display:flex><span>form_type: &#34;full&#34;
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Protect Your Belongings with Renters Insurance
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Your content goes here...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### What&#39;s Covered
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> Personal property
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> Liability protection
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> Additional living expenses
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Contact us today for a quote!</span></span></code></pre></div><h3 id=step-2-choose-form-type>Step 2: Choose Form Type<a class=anchor href=#step-2-choose-form-type>#</a></h3><p><strong>form_type: &ldquo;simple&rdquo;</strong> - Zip code + insurance type only</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>form_type</span>: <span style=color:#e6db74>&#34;simple&#34;</span></span></span></code></pre></div><p><strong>form_type: &ldquo;full&rdquo;</strong> - Complete contact form (name, email, phone, comments)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>form_type</span>: <span style=color:#e6db74>&#34;full&#34;</span></span></span></code></pre></div><h3 id=step-3-add-to-navigation-optional>Step 3: Add to Navigation (Optional)<a class=anchor href=#step-3-add-to-navigation-optional>#</a></h3><p>If the page should appear in the main navigation, edit:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/Users/mark/PycharmProjects/klm-migrate/klm-hugo-site/layouts/_default/baseof.html</span></span></code></pre></div><p>Find the navigation section and add your link:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/renters-insurance/&#34;</span>&gt;Renters Insurance&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;</span></span></code></pre></div><p>For dropdown menu items, add within a dropdown:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>li</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dropdown&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dropdown-toggle&#34;</span>&gt;INSURANCE SERVICES&lt;/<span style=color:#f92672>a</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>ul</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dropdown-menu&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/auto-insurance/&#34;</span>&gt;Auto Insurance&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/home-insurance/&#34;</span>&gt;Home Insurance&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- Add your new page here --&gt;</span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/renters-insurance/&#34;</span>&gt;Renters Insurance&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>li</span>&gt;</span></span></code></pre></div><h3 id=step-4-add-images-if-needed>Step 4: Add Images (if needed)<a class=anchor href=#step-4-add-images-if-needed>#</a></h3><p>Place images in:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/Users/mark/PycharmProjects/klm-migrate/klm-hugo-site/static/images/</span></span></code></pre></div><p>Reference in your content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>![<span style=color:#f92672>Alt text</span>](<span style=color:#a6e22e>/images/your-image.png</span>)</span></span></code></pre></div><hr><h2 id=local-testing-localhost>Local Testing (Localhost)<a class=anchor href=#local-testing-localhost>#</a></h2><h3 id=start-the-hugo-development-server>Start the Hugo Development Server<a class=anchor href=#start-the-hugo-development-server>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site
</span></span><span style=display:flex><span>hugo server -D --bind 0.0.0.0</span></span></code></pre></div><p>The site will be available at: <strong>http://localhost:1313</strong></p><h3 id=testing-checklist>Testing Checklist<a class=anchor href=#testing-checklist>#</a></h3><p>Before publishing to staging, verify:</p><ul><li><input disabled type=checkbox> New page displays correctly</li><li><input disabled type=checkbox> All images load properly</li><li><input disabled type=checkbox> Navigation links work</li><li><input disabled type=checkbox> Forms are functional</li><li><input disabled type=checkbox> Content is spell-checked</li><li><input disabled type=checkbox> Mobile layout looks good (resize browser or use dev tools)</li><li><input disabled type=checkbox> No console errors (check browser developer tools)</li></ul><h3 id=uiux-testing-optional>UI/UX Testing (Optional)<a class=anchor href=#uiux-testing-optional>#</a></h3><p>Run automated tests:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 test_ui_ux.py</span></span></code></pre></div><p>This generates screenshots for all devices and pages.</p><hr><h2 id=publishing-to-staging>Publishing to Staging<a class=anchor href=#publishing-to-staging>#</a></h2><h3 id=when-to-publish-to-staging>When to Publish to Staging<a class=anchor href=#when-to-publish-to-staging>#</a></h3><ul><li>After local testing is complete</li><li>Before client review</li><li>Before production deployment</li><li>When you want to share changes with others</li></ul><h3 id=run-the-staging-deployment-script>Run the Staging Deployment Script<a class=anchor href=#run-the-staging-deployment-script>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 publish_to_staging.py</span></span></code></pre></div><h3 id=what-the-script-does>What the Script Does<a class=anchor href=#what-the-script-does>#</a></h3><ol><li>‚úÖ Verifies Hugo and AWS CLI are installed</li><li>‚úÖ Confirms AWS credentials are valid</li><li>üßπ Cleans the build directory</li><li>üî® Builds Hugo site with baseURL: <a href=https://www.klmcrm.com>https://www.klmcrm.com</a></li><li>üì§ Syncs files to S3 bucket (s3://klmcrm.com)</li><li>üóëÔ∏è Deletes old files from S3 (&ndash;delete flag)</li><li>üîÑ Invalidates CloudFront cache</li><li>‚úÖ Verifies site is accessible</li></ol><h3 id=expected-output>Expected Output<a class=anchor href=#expected-output>#</a></h3><pre tabindex=0><code>================================================================================
  KLM Insurance - Staging Deployment
================================================================================

üïê Started at: 2025-12-23 10:30:00
üéØ Target: https://www.klmcrm.com
üì¶ Bucket: s3://klmcrm.com

[Step 1] Verifying Prerequisites
--------------------------------------------------------------------------------
‚úÖ hugo v0.153.1+extended+withdeploy darwin/arm64
‚úÖ AWS Account: 837716495292
‚úÖ IAM User: klm-hugo

[Step 2] Cleaning Build Directory
--------------------------------------------------------------------------------
‚úÖ Cleaning old build directory completed successfully

[Step 3] Building Hugo Site
--------------------------------------------------------------------------------
‚úÖ Building Hugo site for staging completed successfully
üì¶ Built 42 files

[Step 4] Deploying to S3
--------------------------------------------------------------------------------
‚úÖ Syncing to s3://klmcrm.com completed successfully
üì§ Uploaded: 15 files
üóëÔ∏è  Deleted: 3 old files

[Step 5] Invalidating CloudFront Cache
--------------------------------------------------------------------------------
‚úÖ Invalidating CloudFront cache completed successfully
üîÑ Invalidation ID: ICLIAL866EJI2C3USU5R6TONS7
‚è±Ô∏è  Status: InProgress

[Step 6] Verifying Deployment
--------------------------------------------------------------------------------
‚úÖ Site is accessible (HTTP 200)

================================================================================
‚úÖ DEPLOYMENT SUCCESSFUL!
================================================================================
‚è±Ô∏è  Total time: 15.42 seconds
üåê Visit: https://www.klmcrm.com
üìù Note: CloudFront invalidation takes 1-3 minutes to complete</code></pre><h3 id=post-deployment-verification>Post-Deployment Verification<a class=anchor href=#post-deployment-verification>#</a></h3><ol><li><strong>Wait 1-3 minutes</strong> for CloudFront cache invalidation</li><li><strong>Visit the site:</strong> <a href=https://www.klmcrm.com>https://www.klmcrm.com</a></li><li><strong>Test your changes:</strong><ul><li>Navigate to your new page</li><li>Test all forms</li><li>Check on mobile devices</li><li>Verify images load</li></ul></li><li><strong>Hard refresh</strong> (Cmd+Shift+R on Mac, Ctrl+Shift+R on Windows) if changes don&rsquo;t appear</li></ol><hr><h2 id=publishing-to-production>Publishing to Production<a class=anchor href=#publishing-to-production>#</a></h2><h3 id=-important-production-deployment-checklist>‚ö†Ô∏è IMPORTANT: Production Deployment Checklist<a class=anchor href=#-important-production-deployment-checklist>#</a></h3><p>Before deploying to production, ensure:</p><ul><li><input disabled type=checkbox> Changes have been tested in staging</li><li><input disabled type=checkbox> Client/stakeholder has approved the changes</li><li><input disabled type=checkbox> All forms work correctly (test submissions)</li><li><input disabled type=checkbox> All links work</li><li><input disabled type=checkbox> Spelling and grammar have been reviewed</li><li><input disabled type=checkbox> No broken images</li><li><input disabled type=checkbox> Mobile experience tested</li><li><input disabled type=checkbox> You have permission to deploy</li></ul><h3 id=run-the-production-deployment-script>Run the Production Deployment Script<a class=anchor href=#run-the-production-deployment-script>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 publish_to_production.py</span></span></code></pre></div><h3 id=safety-confirmation>Safety Confirmation<a class=anchor href=#safety-confirmation>#</a></h3><p>The script will ask you to confirm:</p><pre tabindex=0><code>================================================================================
  ‚ö†Ô∏è  PRODUCTION DEPLOYMENT WARNING ‚ö†Ô∏è
================================================================================

You are about to deploy to PRODUCTION: www.klminsurance.com
This will update the LIVE website that customers see.

Before proceeding, ensure:
  ‚úì Changes have been tested in staging (www.klmcrm.com)
  ‚úì All forms and links work correctly
  ‚úì Content has been reviewed and approved
  ‚úì You have permission to deploy to production

================================================================================

Type &#39;DEPLOY TO PRODUCTION&#39; to continue (or anything else to cancel):</code></pre><p><strong>You must type exactly:</strong> <code>DEPLOY TO PRODUCTION</code></p><h3 id=what-the-script-does-1>What the Script Does<a class=anchor href=#what-the-script-does-1>#</a></h3><p>Same as staging, but:</p><ul><li>Builds with baseURL: <a href=https://www.klminsurance.com>https://www.klminsurance.com</a></li><li>Deploys to s3://klminsurance.com</li><li>Invalidates production CloudFront cache</li><li>Creates a deployment log in <code>deployment-logs/</code></li></ul><h3 id=post-production-deployment>Post-Production Deployment<a class=anchor href=#post-production-deployment>#</a></h3><ol><li><strong>Wait 1-3 minutes</strong> for CloudFront invalidation</li><li><strong>Visit:</strong> <a href=https://www.klminsurance.com>https://www.klminsurance.com</a></li><li><strong>Spot-check critical pages:</strong><ul><li>Homepage</li><li>Your newly added/changed pages</li><li>Contact form</li><li>Compare Quotes</li></ul></li><li><strong>Monitor for issues</strong> over the next hour</li><li><strong>Keep staging in sync</strong> - any fixes should go through staging first</li></ol><hr><h2 id=troubleshooting>Troubleshooting<a class=anchor href=#troubleshooting>#</a></h2><h3 id=hugo-build-errors>Hugo Build Errors<a class=anchor href=#hugo-build-errors>#</a></h3><p><strong>Error:</strong> <code>command not found: hugo</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install Hugo</span>
</span></span><span style=display:flex><span>brew install hugo</span></span></code></pre></div><p><strong>Error:</strong> <code>failed to render pages</code></p><ul><li>Check for syntax errors in your Markdown files</li><li>Verify front matter (YAML between <code>---</code>) is correctly formatted</li><li>Look for unclosed HTML tags</li></ul><h3 id=aws-deployment-errors>AWS Deployment Errors<a class=anchor href=#aws-deployment-errors>#</a></h3><p><strong>Error:</strong> <code>Unable to locate credentials</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Reconfigure AWS CLI</span>
</span></span><span style=display:flex><span>aws configure</span></span></code></pre></div><p><strong>Error:</strong> <code>Access Denied</code> when syncing to S3</p><ul><li>Verify IAM permissions (user: klm-hugo should have S3 access)</li><li>Check AWS account ID matches: 837716495292</li></ul><p><strong>Error:</strong> <code>Distribution not found</code> (CloudFront)</p><ul><li>Verify CloudFront distribution ID in script</li><li>For production: Update <code>PRODUCTION_CLOUDFRONT_ID</code> in <code>publish_to_production.py</code></li></ul><h3 id=site-not-updating>Site Not Updating<a class=anchor href=#site-not-updating>#</a></h3><p><strong>Issue:</strong> Changes don&rsquo;t appear on staging/production</p><ol><li><p><strong>Check CloudFront cache:</strong></p><ul><li>Invalidation takes 1-3 minutes</li><li>Hard refresh browser (Cmd+Shift+R / Ctrl+Shift+R)</li><li>Try incognito/private browsing mode</li></ul></li><li><p><strong>Verify files were uploaded:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws s3 ls s3://klmcrm.com/ --recursive | grep your-page</span></span></code></pre></div></li><li><p><strong>Check build output:</strong></p><ul><li>Look for errors in deployment script output</li><li>Verify file count matches expectations</li></ul></li></ol><h3 id=hugo-server-issues>Hugo Server Issues<a class=anchor href=#hugo-server-issues>#</a></h3><p><strong>Issue:</strong> <code>port 1313 already in use</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Kill existing Hugo server</span>
</span></span><span style=display:flex><span>lsof -ti:1313 | xargs kill -9
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Or use a different port</span>
</span></span><span style=display:flex><span>hugo server -D --bind 0.0.0.0 --port <span style=color:#ae81ff>1314</span></span></span></code></pre></div><p><strong>Issue:</strong> Changes not showing locally</p><ul><li>Stop and restart Hugo server</li><li>Clear browser cache</li><li>Check for errors in terminal</li></ul><hr><h2 id=quick-reference>Quick Reference<a class=anchor href=#quick-reference>#</a></h2><h3 id=common-commands>Common Commands<a class=anchor href=#common-commands>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Start local development server</span>
</span></span><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site
</span></span><span style=display:flex><span>hugo server -D --bind 0.0.0.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Publish to staging</span>
</span></span><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 publish_to_staging.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Publish to production</span>
</span></span><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 publish_to_production.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run UI/UX tests</span>
</span></span><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 test_ui_ux.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check AWS identity</span>
</span></span><span style=display:flex><span>aws sts get-caller-identity
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># List S3 buckets</span>
</span></span><span style=display:flex><span>aws s3 ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Manually sync to staging (if needed)</span>
</span></span><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site
</span></span><span style=display:flex><span>hugo --baseURL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://www.klmcrm.com&#34;</span> --environment staging
</span></span><span style=display:flex><span>aws s3 sync public/ s3://klmcrm.com --delete
</span></span><span style=display:flex><span>aws cloudfront create-invalidation --distribution-id E3HA8770RGET6T --paths <span style=color:#e6db74>&#34;/*&#34;</span></span></span></code></pre></div><h3 id=file-locations>File Locations<a class=anchor href=#file-locations>#</a></h3><pre tabindex=0><code>Project Root: /Users/mark/PycharmProjects/klm-migrate/

Hugo Site:    klm-hugo-site/
Content:      klm-hugo-site/content/
Layouts:      klm-hugo-site/layouts/
Static:       klm-hugo-site/static/
Images:       klm-hugo-site/static/images/
CSS:          klm-hugo-site/static/css/style.css

Scripts:
  publish_to_staging.py      - Deploy to staging
  publish_to_production.py   - Deploy to production
  test_ui_ux.py             - UI/UX testing

Documentation:
  PUBLISHING_WORKFLOW.md     - This file
  NEW_PAGE_TEMPLATE_GUIDE.md - Page creation guide
  docs/klm_crm_publishing_process.md - AWS/Hugo publishing process</code></pre><h3 id=environment-urls>Environment URLs<a class=anchor href=#environment-urls>#</a></h3><pre tabindex=0><code>Local:      http://localhost:1313
Staging:    https://www.klmcrm.com
            https://klmcrm.com
Production: https://www.klminsurance.com
            https://klminsurance.com</code></pre><h3 id=front-matter-templates>Front Matter Templates<a class=anchor href=#front-matter-templates>#</a></h3><p><strong>Simple Page (zip + insurance type form):</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;Page Title&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#e6db74>&#34;Page description for SEO&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>draft</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>hero_image</span>: <span style=color:#e6db74>&#34;/images/featured-banner.png&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>sidebar_image</span>: <span style=color:#e6db74>&#34;/images/content-banner.png&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>form_type</span>: <span style=color:#e6db74>&#34;simple&#34;</span>
</span></span><span style=display:flex><span>---</span></span></code></pre></div><p><strong>Full Form Page (name, email, phone, comments):</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;Page Title&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#e6db74>&#34;Page description for SEO&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>draft</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>hero_image</span>: <span style=color:#e6db74>&#34;/images/featured-banner.png&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>sidebar_image</span>: <span style=color:#e6db74>&#34;/images/content-banner.png&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>form_type</span>: <span style=color:#e6db74>&#34;full&#34;</span>
</span></span><span style=display:flex><span>---</span></span></code></pre></div><p><strong>Contact Page:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;Contact Us&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#e6db74>&#34;Contact information&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>draft</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>hero_image</span>: <span style=color:#e6db74>&#34;/images/featured-banner.png&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>form_title</span>: <span style=color:#e6db74>&#34;GET A QUOTE&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>form_type</span>: <span style=color:#e6db74>&#34;simple&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>layout</span>: <span style=color:#e6db74>&#34;contact&#34;</span>
</span></span><span style=display:flex><span>---</span></span></code></pre></div><hr><h2 id=complete-lifecycle-example>Complete Lifecycle Example<a class=anchor href=#complete-lifecycle-example>#</a></h2><h3 id=scenario-adding-a-motorcycle-insurance-page>Scenario: Adding a &ldquo;Motorcycle Insurance&rdquo; Page<a class=anchor href=#scenario-adding-a-motorcycle-insurance-page>#</a></h3><ol><li><p><strong>Create the page locally:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site/content
</span></span><span style=display:flex><span>nano motorcycle-insurance.md</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>---
</span></span><span style=display:flex><span>title: &#34;Motorcycle Insurance&#34;
</span></span><span style=display:flex><span>description: &#34;Motorcycle Insurance - KLM Insurance Solutions&#34;
</span></span><span style=display:flex><span>draft: false
</span></span><span style=display:flex><span>hero_image: &#34;/images/featured-banner.png&#34;
</span></span><span style=display:flex><span>sidebar_image: &#34;/images/content-banner.png&#34;
</span></span><span style=display:flex><span>form_type: &#34;full&#34;
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Protect Your Ride with Motorcycle Insurance
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Content here...</span></span></code></pre></div></li><li><p><strong>Test locally:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate/klm-hugo-site
</span></span><span style=display:flex><span>hugo server -D --bind 0.0.0.0</span></span></code></pre></div><p>Visit: http://localhost:1313/motorcycle-insurance/</p></li><li><p><strong>Add to navigation</strong> (edit <code>layouts/_default/baseof.html</code>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/motorcycle-insurance/&#34;</span>&gt;Motorcycle Insurance&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;</span></span></code></pre></div></li><li><p><strong>Test again locally</strong> - verify navigation works</p></li><li><p><strong>Publish to staging:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /Users/mark/PycharmProjects/klm-migrate
</span></span><span style=display:flex><span>python3 publish_to_staging.py</span></span></code></pre></div></li><li><p><strong>Review on staging:</strong></p><ul><li>Visit: <a href=https://www.klmcrm.com/motorcycle-insurance/>https://www.klmcrm.com/motorcycle-insurance/</a></li><li>Test all functionality</li><li>Share with client for approval</li></ul></li><li><p><strong>Get approval</strong> from stakeholder</p></li><li><p><strong>Publish to production:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 publish_to_production.py
</span></span><span style=display:flex><span><span style=color:#75715e># Type: DEPLOY TO PRODUCTION</span></span></span></code></pre></div></li><li><p><strong>Verify on production:</strong></p><ul><li>Visit: <a href=https://www.klminsurance.com/motorcycle-insurance/>https://www.klminsurance.com/motorcycle-insurance/</a></li><li>Confirm everything works</li></ul></li></ol><p><strong>‚úÖ Done!</strong> The new page is now live.</p><hr><h2 id=best-practices>Best Practices<a class=anchor href=#best-practices>#</a></h2><h3 id=development>Development<a class=anchor href=#development>#</a></h3><ul><li>‚úÖ Always test locally first</li><li>‚úÖ Use descriptive commit messages (if using git)</li><li>‚úÖ Keep content and code separate</li><li>‚úÖ Test on multiple browsers and devices</li></ul><h3 id=staging>Staging<a class=anchor href=#staging>#</a></h3><ul><li>‚úÖ Deploy to staging for every change</li><li>‚úÖ Get client approval before production</li><li>‚úÖ Use staging URL for sharing previews</li><li>‚úÖ Staging should mirror production as closely as possible</li></ul><h3 id=production>Production<a class=anchor href=#production>#</a></h3><ul><li>‚úÖ Only deploy during low-traffic hours (if possible)</li><li>‚úÖ Always test in staging first</li><li>‚úÖ Keep deployment logs</li><li>‚úÖ Monitor site after deployment</li><li>‚ö†Ô∏è Never deploy untested changes directly to production</li></ul><h3 id=general>General<a class=anchor href=#general>#</a></h3><ul><li>‚úÖ Document all changes</li><li>‚úÖ Keep backups of important content</li><li>‚úÖ Regularly update dependencies (Hugo, etc.)</li><li>‚úÖ Monitor site performance and uptime</li></ul><hr><h2 id=support--resources>Support & Resources<a class=anchor href=#support--resources>#</a></h2><h3 id=documentation>Documentation<a class=anchor href=#documentation>#</a></h3><ul><li>Hugo Documentation: <a href=https://gohugo.io/documentation/>https://gohugo.io/documentation/</a></li><li>AWS S3 Documentation: <a href=https://docs.aws.amazon.com/s3/>https://docs.aws.amazon.com/s3/</a></li><li>AWS CloudFront Documentation: <a href=https://docs.aws.amazon.com/cloudfront/>https://docs.aws.amazon.com/cloudfront/</a></li></ul><h3 id=project-files>Project Files<a class=anchor href=#project-files>#</a></h3><ul><li>Main workflow: <code>PUBLISHING_WORKFLOW.md</code> (this file)</li><li>Page templates: <code>NEW_PAGE_TEMPLATE_GUIDE.md</code></li><li>AWS config: <code>docs/klm_crm_publishing_process.md</code></li></ul><h3 id=getting-help>Getting Help<a class=anchor href=#getting-help>#</a></h3><ul><li>Check the troubleshooting section above</li><li>Review deployment script output for error messages</li><li>Verify AWS permissions and credentials</li><li>Test with a simple page first before complex changes</li></ul><hr><h2 id=maintenance>Maintenance<a class=anchor href=#maintenance>#</a></h2><h3 id=regular-tasks>Regular Tasks<a class=anchor href=#regular-tasks>#</a></h3><p><strong>Weekly:</strong></p><ul><li>Review staging site for any issues</li><li>Check for broken links</li><li>Monitor form submissions</li></ul><p><strong>Monthly:</strong></p><ul><li>Update Hugo if new version available</li><li>Review and clean up old deployment logs</li><li>Backup important content</li></ul><p><strong>As Needed:</strong></p><ul><li>Update SSL certificates (handled by AWS)</li><li>Review and update IAM permissions</li><li>Optimize images for faster loading</li></ul><hr><h2 id=appendix-script-details>Appendix: Script Details<a class=anchor href=#appendix-script-details>#</a></h2><h3 id=publish_to_stagingpy>publish_to_staging.py<a class=anchor href=#publish_to_stagingpy>#</a></h3><ul><li><strong>Purpose:</strong> Deploy to staging environment</li><li><strong>Target:</strong> <a href=https://www.klmcrm.com>https://www.klmcrm.com</a></li><li><strong>S3 Bucket:</strong> s3://klmcrm.com</li><li><strong>CloudFront:</strong> E3HA8770RGET6T</li><li><strong>Safety:</strong> No confirmation required (staging is safe)</li></ul><h3 id=publish_to_productionpy>publish_to_production.py<a class=anchor href=#publish_to_productionpy>#</a></h3><ul><li><strong>Purpose:</strong> Deploy to production environment</li><li><strong>Target:</strong> <a href=https://www.klminsurance.com>https://www.klminsurance.com</a></li><li><strong>S3 Bucket:</strong> s3://klminsurance.com</li><li><strong>CloudFront:</strong> <em>Needs configuration</em></li><li><strong>Safety:</strong> Requires typing &ldquo;DEPLOY TO PRODUCTION&rdquo;</li><li><strong>Logging:</strong> Creates deployment log in <code>deployment-logs/</code></li></ul><h3 id=test_ui_uxpy>test_ui_ux.py<a class=anchor href=#test_ui_uxpy>#</a></h3><ul><li><strong>Purpose:</strong> Automated UI/UX testing</li><li><strong>Devices:</strong> iPhone 14 Pro, iPad Pro, Desktop (2 sizes)</li><li><strong>Tests:</strong> Load time, navigation, forms, images, layout</li><li><strong>Output:</strong> Screenshots in <code>screenshots-testing/</code></li></ul><hr><p><strong>Last Updated:</strong> December 23, 2025
<strong>Document Version:</strong> 1.0
<strong>Maintained by:</strong> KLM Insurance Development Team</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#klm-insurance-website---complete-publishing-workflow>KLM Insurance Website - Complete Publishing Workflow</a><ul><li><a href=#table-of-contents>Table of Contents</a></li><li><a href=#overview>Overview</a></li><li><a href=#environment-architecture>Environment Architecture</a></li><li><a href=#prerequisites>Prerequisites</a><ul><li><a href=#required-software>Required Software</a></li><li><a href=#aws-configuration>AWS Configuration</a></li></ul></li><li><a href=#development-workflow>Development Workflow</a><ul><li><a href=#daily-development-process>Daily Development Process</a></li></ul></li><li><a href=#creating-a-new-page>Creating a New Page</a><ul><li><a href=#step-1-create-content-file>Step 1: Create Content File</a></li><li><a href=#step-2-choose-form-type>Step 2: Choose Form Type</a></li><li><a href=#step-3-add-to-navigation-optional>Step 3: Add to Navigation (Optional)</a></li><li><a href=#step-4-add-images-if-needed>Step 4: Add Images (if needed)</a></li></ul></li><li><a href=#local-testing-localhost>Local Testing (Localhost)</a><ul><li><a href=#start-the-hugo-development-server>Start the Hugo Development Server</a></li><li><a href=#testing-checklist>Testing Checklist</a></li><li><a href=#uiux-testing-optional>UI/UX Testing (Optional)</a></li></ul></li><li><a href=#publishing-to-staging>Publishing to Staging</a><ul><li><a href=#when-to-publish-to-staging>When to Publish to Staging</a></li><li><a href=#run-the-staging-deployment-script>Run the Staging Deployment Script</a></li><li><a href=#what-the-script-does>What the Script Does</a></li><li><a href=#expected-output>Expected Output</a></li><li><a href=#post-deployment-verification>Post-Deployment Verification</a></li></ul></li><li><a href=#publishing-to-production>Publishing to Production</a><ul><li><a href=#-important-production-deployment-checklist>‚ö†Ô∏è IMPORTANT: Production Deployment Checklist</a></li><li><a href=#run-the-production-deployment-script>Run the Production Deployment Script</a></li><li><a href=#safety-confirmation>Safety Confirmation</a></li><li><a href=#what-the-script-does-1>What the Script Does</a></li><li><a href=#post-production-deployment>Post-Production Deployment</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#hugo-build-errors>Hugo Build Errors</a></li><li><a href=#aws-deployment-errors>AWS Deployment Errors</a></li><li><a href=#site-not-updating>Site Not Updating</a></li><li><a href=#hugo-server-issues>Hugo Server Issues</a></li></ul></li><li><a href=#quick-reference>Quick Reference</a><ul><li><a href=#common-commands>Common Commands</a></li><li><a href=#file-locations>File Locations</a></li><li><a href=#environment-urls>Environment URLs</a></li><li><a href=#front-matter-templates>Front Matter Templates</a></li></ul></li><li><a href=#complete-lifecycle-example>Complete Lifecycle Example</a><ul><li><a href=#scenario-adding-a-motorcycle-insurance-page>Scenario: Adding a &ldquo;Motorcycle Insurance&rdquo; Page</a></li></ul></li><li><a href=#best-practices>Best Practices</a><ul><li><a href=#development>Development</a></li><li><a href=#staging>Staging</a></li><li><a href=#production>Production</a></li><li><a href=#general>General</a></li></ul></li><li><a href=#support--resources>Support & Resources</a><ul><li><a href=#documentation>Documentation</a></li><li><a href=#project-files>Project Files</a></li><li><a href=#getting-help>Getting Help</a></li></ul></li><li><a href=#maintenance>Maintenance</a><ul><li><a href=#regular-tasks>Regular Tasks</a></li></ul></li><li><a href=#appendix-script-details>Appendix: Script Details</a><ul><li><a href=#publish_to_stagingpy>publish_to_staging.py</a></li><li><a href=#publish_to_productionpy>publish_to_production.py</a></li><li><a href=#test_ui_uxpy>test_ui_ux.py</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>