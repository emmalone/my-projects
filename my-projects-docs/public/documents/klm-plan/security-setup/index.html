<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="KLM Business Plan - Security Setup# Current Status# ✅ CloudFront Distribution Created
Distribution ID: E1Z0GEJNAKEO42 Domain: d1jrr6wppi7k7d.cloudfront.net Status: Deployed HTTPS: Enabled (automatic with CloudFront) ✅ Lambda@Edge Function Created
Function Name: klm-plan-basic-auth Function ARN: arn:aws:lambda:us-east-1:837716495292:function:klm-plan-basic-auth:1 Purpose: Basic HTTP authentication Login Credentials# Once Lambda@Edge is attached to CloudFront:
Username: klm Password: KLM2026Plan!
Manual Step Required: Attach Lambda@Edge to CloudFront# Due to CLI complexity, please complete this final step via AWS Console:
Option 1: AWS Console (5 minutes)# Go to CloudFront Console
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/documents/klm-plan/security-setup/"><meta property="og:site_name" content="My Projects - Documentation Hub"><meta property="og:title" content="SECURITY-SETUP"><meta property="og:description" content="KLM Business Plan - Security Setup# Current Status# ✅ CloudFront Distribution Created
Distribution ID: E1Z0GEJNAKEO42 Domain: d1jrr6wppi7k7d.cloudfront.net Status: Deployed HTTPS: Enabled (automatic with CloudFront) ✅ Lambda@Edge Function Created
Function Name: klm-plan-basic-auth Function ARN: arn:aws:lambda:us-east-1:837716495292:function:klm-plan-basic-auth:1 Purpose: Basic HTTP authentication Login Credentials# Once Lambda@Edge is attached to CloudFront:
Username: klm Password: KLM2026Plan!
Manual Step Required: Attach Lambda@Edge to CloudFront# Due to CLI complexity, please complete this final step via AWS Console:
Option 1: AWS Console (5 minutes)# Go to CloudFront Console"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="documents"><meta property="article:published_time" content="2026-01-02T23:31:15+00:00"><meta property="article:modified_time" content="2026-01-02T23:31:15+00:00"><meta itemprop=name content="SECURITY-SETUP"><meta itemprop=description content="KLM Business Plan - Security Setup# Current Status# ✅ CloudFront Distribution Created
Distribution ID: E1Z0GEJNAKEO42 Domain: d1jrr6wppi7k7d.cloudfront.net Status: Deployed HTTPS: Enabled (automatic with CloudFront) ✅ Lambda@Edge Function Created
Function Name: klm-plan-basic-auth Function ARN: arn:aws:lambda:us-east-1:837716495292:function:klm-plan-basic-auth:1 Purpose: Basic HTTP authentication Login Credentials# Once Lambda@Edge is attached to CloudFront:
Username: klm Password: KLM2026Plan!
Manual Step Required: Attach Lambda@Edge to CloudFront# Due to CLI complexity, please complete this final step via AWS Console:
Option 1: AWS Console (5 minutes)# Go to CloudFront Console"><meta itemprop=datePublished content="2026-01-02T23:31:15+00:00"><meta itemprop=dateModified content="2026-01-02T23:31:15+00:00"><meta itemprop=wordCount content="599"><title>SECURITY-SETUP | My Projects - Documentation Hub</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://localhost:1313/documents/klm-plan/security-setup/><link rel=stylesheet href=/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj+RQ9XBXU=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.da5a5af27f9bdea67bd6f07f3142824ec301e0c7f9d37c0fc61aefc961834a9e.js integrity="sha256-2lpa8n+b3qZ71vB/MUKCTsMB4Mf503wPxhrvyWGDSp4=" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-documents"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>My Projects - Documentation Hub</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/icons/menu.svg class=book-icon alt=Menu></label><h3>SECURITY-SETUP</h3><label for=toc-control><img src=/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#klm-business-plan---security-setup>KLM Business Plan - Security Setup</a><ul><li><a href=#current-status>Current Status</a></li><li><a href=#login-credentials>Login Credentials</a></li><li><a href=#manual-step-required-attach-lambdaedge-to-cloudfront>Manual Step Required: Attach Lambda@Edge to CloudFront</a><ul><li><a href=#option-1-aws-console-5-minutes>Option 1: AWS Console (5 minutes)</a></li><li><a href=#option-2-use-aws-cli-script-alternative>Option 2: Use AWS CLI Script (Alternative)</a></li></ul></li><li><a href=#after-setup-is-complete>After Setup is Complete</a><ul><li><a href=#your-secure-urls>Your Secure URLs</a></li><li><a href=#recommended-disable-public-s3-access>Recommended: Disable Public S3 Access</a></li></ul></li><li><a href=#mobile-editing-workflow-unchanged>Mobile Editing Workflow (Unchanged)</a></li><li><a href=#changing-the-password>Changing the Password</a></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#i-dont-see-a-login-prompt>&ldquo;I don&rsquo;t see a login prompt&rdquo;</a></li><li><a href=#wrong-username-or-password>&ldquo;Wrong username or password&rdquo;</a></li><li><a href=#github-actions-failing-after-cloudfront-setup>&ldquo;GitHub Actions failing after CloudFront setup&rdquo;</a></li></ul></li><li><a href=#next-steps>Next Steps</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=klm-business-plan---security-setup>KLM Business Plan - Security Setup<a class=anchor href=#klm-business-plan---security-setup>#</a></h1><h2 id=current-status>Current Status<a class=anchor href=#current-status>#</a></h2><p>✅ <strong>CloudFront Distribution Created</strong></p><ul><li>Distribution ID: <code>E1Z0GEJNAKEO42</code></li><li>Domain: <code>d1jrr6wppi7k7d.cloudfront.net</code></li><li>Status: Deployed</li><li>HTTPS: Enabled (automatic with CloudFront)</li></ul><p>✅ <strong>Lambda@Edge Function Created</strong></p><ul><li>Function Name: <code>klm-plan-basic-auth</code></li><li>Function ARN: <code>arn:aws:lambda:us-east-1:837716495292:function:klm-plan-basic-auth:1</code></li><li>Purpose: Basic HTTP authentication</li></ul><h2 id=login-credentials>Login Credentials<a class=anchor href=#login-credentials>#</a></h2><p>Once Lambda@Edge is attached to CloudFront:</p><p><strong>Username:</strong> <code>klm</code>
<strong>Password:</strong> <code>KLM2026Plan!</code></p><h2 id=manual-step-required-attach-lambdaedge-to-cloudfront>Manual Step Required: Attach Lambda@Edge to CloudFront<a class=anchor href=#manual-step-required-attach-lambdaedge-to-cloudfront>#</a></h2><p>Due to CLI complexity, please complete this final step via AWS Console:</p><h3 id=option-1-aws-console-5-minutes>Option 1: AWS Console (5 minutes)<a class=anchor href=#option-1-aws-console-5-minutes>#</a></h3><ol><li><p><strong>Go to CloudFront Console</strong></p><ul><li>Visit: <a href=https://console.aws.amazon.com/cloudfront/v3/home>https://console.aws.amazon.com/cloudfront/v3/home</a></li><li>Click on distribution ID: <code>E1Z0GEJNAKEO42</code></li></ul></li><li><p><strong>Edit Behaviors</strong></p><ul><li>Go to the &ldquo;Behaviors&rdquo; tab</li><li>Select the default behavior (check the box)</li><li>Click &ldquo;Edit&rdquo;</li></ul></li><li><p><strong>Add Lambda@Edge Function Association</strong></p><ul><li>Scroll down to &ldquo;Function associations&rdquo;</li><li>Under &ldquo;Viewer request&rdquo;:<ul><li>CloudFront Functions: Leave empty</li><li>Lambda@Edge: Select &ldquo;Use existing Lambda@Edge function&rdquo;</li><li>Function ARN: Paste this exactly:<pre tabindex=0><code>arn:aws:lambda:us-east-1:837716495292:function:klm-plan-basic-auth:1</code></pre></li><li>Event type: <code>Viewer Request</code></li><li>Include body: Leave unchecked</li></ul></li></ul></li><li><p><strong>Save Changes</strong></p><ul><li>Click &ldquo;Save changes&rdquo; at the bottom</li><li>Wait 5-10 minutes for deployment (CloudFront distributes to all edge locations)</li></ul></li><li><p><strong>Test It</strong></p><ul><li>Visit: <a href=https://d1jrr6wppi7k7d.cloudfront.net>https://d1jrr6wppi7k7d.cloudfront.net</a></li><li>You should see a login prompt</li><li>Enter username: <code>klm</code> / password: <code>KLM2026Plan!</code></li></ul></li></ol><h3 id=option-2-use-aws-cli-script-alternative>Option 2: Use AWS CLI Script (Alternative)<a class=anchor href=#option-2-use-aws-cli-script-alternative>#</a></h3><p>If you prefer command line, run this Python script:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># First install boto3 if needed</span>
</span></span><span style=display:flex><span>pip3 install boto3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Then create and run this script</span>
</span></span><span style=display:flex><span>cat &gt; attach-lambda.py <span style=color:#e6db74>&lt;&lt; &#39;EOF&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>import boto3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>import json
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>cloudfront = boto3.client(&#39;cloudfront&#39;, region_name=&#39;us-east-1&#39;)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74># Get current distribution config
</span></span></span><span style=display:flex><span><span style=color:#e6db74>dist_id = &#39;E1Z0GEJNAKEO42&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>response = cloudfront.get_distribution_config(Id=dist_id)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>config = response[&#39;DistributionConfig&#39;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>etag = response[&#39;ETag&#39;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74># Add Lambda@Edge to default cache behavior
</span></span></span><span style=display:flex><span><span style=color:#e6db74>config[&#39;DefaultCacheBehavior&#39;][&#39;LambdaFunctionAssociations&#39;] = {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#39;Quantity&#39;: 1,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#39;Items&#39;: [{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#39;LambdaFunctionARN&#39;: &#39;arn:aws:lambda:us-east-1:837716495292:function:klm-plan-basic-auth:1&#39;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#39;EventType&#39;: &#39;viewer-request&#39;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#39;IncludeBody&#39;: False
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74># Update distribution
</span></span></span><span style=display:flex><span><span style=color:#e6db74>cloudfront.update_distribution(
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Id=dist_id,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    DistributionConfig=config,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    IfMatch=etag
</span></span></span><span style=display:flex><span><span style=color:#e6db74>)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>print(&#34;✅ Lambda@Edge attached successfully!&#34;)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>print(&#34;⏳ Wait 5-10 minutes for deployment to complete&#34;)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>python3 attach-lambda.py</span></span></code></pre></div><h2 id=after-setup-is-complete>After Setup is Complete<a class=anchor href=#after-setup-is-complete>#</a></h2><h3 id=your-secure-urls>Your Secure URLs<a class=anchor href=#your-secure-urls>#</a></h3><p><strong>Primary URL (HTTPS with auth):</strong></p><pre tabindex=0><code>https://d1jrr6wppi7k7d.cloudfront.net</code></pre><p><strong>Old URL (will remain accessible without auth):</strong></p><pre tabindex=0><code>http://klm-plan.s3-website-us-east-1.amazonaws.com</code></pre><h3 id=recommended-disable-public-s3-access>Recommended: Disable Public S3 Access<a class=anchor href=#recommended-disable-public-s3-access>#</a></h3><p>Once CloudFront + Lambda@Edge is working, you can make the S3 bucket private:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Remove public access policy</span>
</span></span><span style=display:flex><span>aws s3api delete-bucket-policy --bucket klm-plan
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Block all public access</span>
</span></span><span style=display:flex><span>aws s3api put-public-access-block <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --bucket klm-plan <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --public-access-block-configuration <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;BlockPublicAcls=true,IgnorePublicAcls=true,BlockPublicPolicy=true,RestrictPublicBuckets=true&#34;</span></span></span></code></pre></div><p>Then update CloudFront to use S3 origin instead of website endpoint (requires additional configuration).</p><h2 id=mobile-editing-workflow-unchanged>Mobile Editing Workflow (Unchanged)<a class=anchor href=#mobile-editing-workflow-unchanged>#</a></h2><ol><li>Edit files on GitHub (mobile app or web)</li><li>Commit to main branch</li><li>GitHub Actions deploys to S3</li><li>CloudFront serves the updated content (with password protection)</li><li>Changes visible in ~60 seconds (+ CloudFront cache time)</li></ol><h2 id=changing-the-password>Changing the Password<a class=anchor href=#changing-the-password>#</a></h2><p>To change the login credentials:</p><ol><li><p><strong>Edit the Lambda function code:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Edit lambda-auth.js</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Change authUser and authPass variables</span>
</span></span><span style=display:flex><span>nano lambda-auth.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Repackage</span>
</span></span><span style=display:flex><span>zip lambda-auth.zip lambda-auth.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Update function</span>
</span></span><span style=display:flex><span>aws lambda update-function-code <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --function-name klm-plan-basic-auth <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --zip-file fileb://lambda-auth.zip <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --region us-east-1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Publish new version</span>
</span></span><span style=display:flex><span>aws lambda publish-version <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --function-name klm-plan-basic-auth <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>  --region us-east-1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Update CloudFront to use new version (note the version number from above)</span></span></span></code></pre></div></li><li><p><strong>Or via AWS Console:</strong></p><ul><li>Go to Lambda Console → klm-plan-basic-auth</li><li>Edit code inline</li><li>Deploy</li><li>Publish new version</li><li>Update CloudFront behavior to use new version ARN</li></ul></li></ol><h2 id=troubleshooting>Troubleshooting<a class=anchor href=#troubleshooting>#</a></h2><h3 id=i-dont-see-a-login-prompt>&ldquo;I don&rsquo;t see a login prompt&rdquo;<a class=anchor href=#i-dont-see-a-login-prompt>#</a></h3><ul><li>CloudFront deployment can take 5-15 minutes</li><li>Check distribution status: <code>aws cloudfront get-distribution --id E1Z0GEJNAKEO42 | grep Status</code></li><li>Hard refresh browser (Cmd+Shift+R on Mac, Ctrl+Shift+R on Windows)</li></ul><h3 id=wrong-username-or-password>&ldquo;Wrong username or password&rdquo;<a class=anchor href=#wrong-username-or-password>#</a></h3><ul><li>Verify you&rsquo;re using: <code>klm</code> / <code>KLM2026Plan!</code></li><li>Check Lambda function code has correct credentials</li><li>Ensure you attached the Lambda@Edge to the distribution</li></ul><h3 id=github-actions-failing-after-cloudfront-setup>&ldquo;GitHub Actions failing after CloudFront setup&rdquo;<a class=anchor href=#github-actions-failing-after-cloudfront-setup>#</a></h3><ul><li>Need to add CloudFront cache invalidation (see below)</li></ul><h2 id=next-steps>Next Steps<a class=anchor href=#next-steps>#</a></h2><ol><li>✅ Complete the manual Lambda@Edge attachment (above)</li><li>✅ Test the login at <a href=https://d1jrr6wppi7k7d.cloudfront.net>https://d1jrr6wppi7k7d.cloudfront.net</a></li><li>⏭️ Update GitHub Actions to invalidate CloudFront cache</li><li>⏭️ (Optional) Set up custom domain</li><li>⏭️ (Optional) Make S3 bucket private</li></ol><hr><p>Created: 2026-01-02
Last Updated: 2026-01-02</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#klm-business-plan---security-setup>KLM Business Plan - Security Setup</a><ul><li><a href=#current-status>Current Status</a></li><li><a href=#login-credentials>Login Credentials</a></li><li><a href=#manual-step-required-attach-lambdaedge-to-cloudfront>Manual Step Required: Attach Lambda@Edge to CloudFront</a><ul><li><a href=#option-1-aws-console-5-minutes>Option 1: AWS Console (5 minutes)</a></li><li><a href=#option-2-use-aws-cli-script-alternative>Option 2: Use AWS CLI Script (Alternative)</a></li></ul></li><li><a href=#after-setup-is-complete>After Setup is Complete</a><ul><li><a href=#your-secure-urls>Your Secure URLs</a></li><li><a href=#recommended-disable-public-s3-access>Recommended: Disable Public S3 Access</a></li></ul></li><li><a href=#mobile-editing-workflow-unchanged>Mobile Editing Workflow (Unchanged)</a></li><li><a href=#changing-the-password>Changing the Password</a></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#i-dont-see-a-login-prompt>&ldquo;I don&rsquo;t see a login prompt&rdquo;</a></li><li><a href=#wrong-username-or-password>&ldquo;Wrong username or password&rdquo;</a></li><li><a href=#github-actions-failing-after-cloudfront-setup>&ldquo;GitHub Actions failing after CloudFront setup&rdquo;</a></li></ul></li><li><a href=#next-steps>Next Steps</a></li></ul></li></ul></nav></div></aside></main></body></html>